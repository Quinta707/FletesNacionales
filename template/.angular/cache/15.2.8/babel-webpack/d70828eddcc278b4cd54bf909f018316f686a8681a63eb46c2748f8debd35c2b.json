{"ast":null,"code":"import _asyncToGenerator from \"F:/Plantillas/template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from '@angular/core';\nimport { Injectable, PLATFORM_ID, Inject, EventEmitter, Directive, Input, Output, Component, ViewEncapsulation, ViewChild, HostListener, NgModule } from '@angular/core';\nimport * as i10 from '@angular/common';\nimport { isPlatformBrowser, CommonModule } from '@angular/common';\nimport { ReplaySubject, of, Observable, Subject } from 'rxjs';\nimport * as i3 from '@angular/router';\nimport { RouterModule } from '@angular/router';\nimport { finalize } from 'rxjs/operators';\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"background-color\": a0,\n    \"color\": a1,\n    \"border-color\": a2\n  };\n};\nconst _c1 = [\"*\"];\nconst _c2 = [\"stepHolder\"];\nconst _c3 = [\"stepContainer\"];\nfunction JoyrideStepComponent_joyride_arrow_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"joyride-arrow\", 17);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"top\", ctx_r1.arrowTopPosition, \"px\")(\"left\", ctx_r1.arrowLeftPosition, \"px\");\n    i0.ɵɵproperty(\"position\", ctx_r1.arrowPosition);\n  }\n}\nfunction JoyrideStepComponent_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction JoyrideStepComponent_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n    i0.ɵɵpipe(1, \"async\");\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(1, 1, ctx_r5.text), \" \");\n  }\n}\nfunction JoyrideStepComponent_div_15_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction JoyrideStepComponent_div_15_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r13.counter);\n  }\n}\nfunction JoyrideStepComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtemplate(1, JoyrideStepComponent_div_15_ng_container_1_Template, 1, 0, \"ng-container\", 9);\n    i0.ɵɵtemplate(2, JoyrideStepComponent_div_15_ng_template_2_Template, 2, 1, \"ng-template\", null, 19, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r12 = i0.ɵɵreference(3);\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r6.customCounter ? ctx_r6.customCounter : _r12)(\"ngTemplateOutletContext\", ctx_r6.counterData);\n  }\n}\nfunction JoyrideStepComponent_div_17_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction JoyrideStepComponent_div_17_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"joyride-button\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"color\", ctx_r16.themeColor);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, ctx_r16.prevText));\n  }\n}\nfunction JoyrideStepComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵlistener(\"click\", function JoyrideStepComponent_div_17_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.prev());\n    });\n    i0.ɵɵtemplate(1, JoyrideStepComponent_div_17_ng_container_1_Template, 1, 0, \"ng-container\", 22);\n    i0.ɵɵtemplate(2, JoyrideStepComponent_div_17_ng_template_2_Template, 3, 4, \"ng-template\", null, 23, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r15 = i0.ɵɵreference(3);\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r7.customPrevButton ? ctx_r7.customPrevButton : _r15);\n  }\n}\nfunction JoyrideStepComponent_div_18_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction JoyrideStepComponent_div_18_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"joyride-button\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"color\", ctx_r21.themeColor);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, ctx_r21.nextText));\n  }\n}\nfunction JoyrideStepComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵlistener(\"click\", function JoyrideStepComponent_div_18_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.next());\n    });\n    i0.ɵɵtemplate(1, JoyrideStepComponent_div_18_ng_container_1_Template, 1, 0, \"ng-container\", 22);\n    i0.ɵɵtemplate(2, JoyrideStepComponent_div_18_ng_template_2_Template, 3, 4, \"ng-template\", null, 26, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r20 = i0.ɵɵreference(3);\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r8.customNextButton ? ctx_r8.customNextButton : _r20);\n  }\n}\nfunction JoyrideStepComponent_ng_template_19_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction JoyrideStepComponent_ng_template_19_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"joyride-button\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r26 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"color\", ctx_r26.themeColor);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, ctx_r26.doneText));\n  }\n}\nfunction JoyrideStepComponent_ng_template_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵlistener(\"click\", function JoyrideStepComponent_ng_template_19_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r27.close());\n    });\n    i0.ɵɵtemplate(1, JoyrideStepComponent_ng_template_19_ng_container_1_Template, 1, 0, \"ng-container\", 22);\n    i0.ɵɵtemplate(2, JoyrideStepComponent_ng_template_19_ng_template_2_Template, 3, 4, \"ng-template\", null, 29, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r25 = i0.ɵɵreference(3);\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r10.customDoneButton ? ctx_r10.customDoneButton : _r25);\n  }\n}\nclass JoyrideStep {\n  constructor() {\n    this.title = new ReplaySubject();\n    this.text = new ReplaySubject();\n  }\n}\nclass JoyrideError extends Error {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, JoyrideError.prototype);\n  }\n}\nclass JoyrideStepDoesNotExist extends Error {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, JoyrideStepDoesNotExist.prototype);\n  }\n}\nclass JoyrideStepOutOfRange extends Error {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, JoyrideStepOutOfRange.prototype);\n  }\n}\nconst DEFAULT_THEME_COLOR = '#3b5560';\nconst STEP_DEFAULT_POSITION = 'bottom';\nconst DEFAULT_TIMEOUT_BETWEEN_STEPS = 1;\nclass ObservableCustomTexts {}\nconst DEFAULT_TEXTS = {\n  prev: of('prev'),\n  next: of('next'),\n  done: of('done'),\n  close: of(null)\n};\nclass JoyrideOptionsService {\n  constructor() {\n    this.themeColor = DEFAULT_THEME_COLOR;\n    this.stepDefaultPosition = STEP_DEFAULT_POSITION;\n    this.logsEnabled = false;\n    this.showCounter = true;\n    this.showPrevButton = true;\n    this.stepsOrder = [];\n  }\n  setOptions(options) {\n    this.stepsOrder = options.steps;\n    this.stepDefaultPosition = options.stepDefaultPosition ? options.stepDefaultPosition : this.stepDefaultPosition;\n    this.logsEnabled = typeof options.logsEnabled !== 'undefined' ? options.logsEnabled : this.logsEnabled;\n    this.showCounter = typeof options.showCounter !== 'undefined' ? options.showCounter : this.showCounter;\n    this.showPrevButton = typeof options.showPrevButton !== 'undefined' ? options.showPrevButton : this.showPrevButton;\n    this.themeColor = options.themeColor ? options.themeColor : this.themeColor;\n    this.firstStep = options.startWith;\n    this.waitingTime = typeof options.waitingTime !== 'undefined' ? options.waitingTime : DEFAULT_TIMEOUT_BETWEEN_STEPS;\n    typeof options.customTexts !== 'undefined' ? this.setCustomText(options.customTexts) : this.setCustomText(DEFAULT_TEXTS);\n  }\n  getBackdropColor() {\n    return this.hexToRgb(this.themeColor);\n  }\n  getThemeColor() {\n    return this.themeColor;\n  }\n  getStepDefaultPosition() {\n    return this.stepDefaultPosition;\n  }\n  getStepsOrder() {\n    return this.stepsOrder;\n  }\n  getFirstStep() {\n    return this.firstStep;\n  }\n  getWaitingTime() {\n    return this.waitingTime;\n  }\n  areLogsEnabled() {\n    return this.logsEnabled;\n  }\n  isCounterVisible() {\n    return this.showCounter;\n  }\n  isPrevButtonVisible() {\n    return this.showPrevButton;\n  }\n  getCustomTexts() {\n    return this.customTexts;\n  }\n  setCustomText(texts) {\n    let prev;\n    let next;\n    let done;\n    let close;\n    prev = texts.prev ? texts.prev : DEFAULT_TEXTS.prev;\n    next = texts.next ? texts.next : DEFAULT_TEXTS.next;\n    done = texts.done ? texts.done : DEFAULT_TEXTS.done;\n    close = texts.close ? texts.close : DEFAULT_TEXTS.close;\n    this.customTexts = {\n      prev: this.toObservable(prev),\n      next: this.toObservable(next),\n      done: this.toObservable(done),\n      close: this.toObservable(close)\n    };\n  }\n  toObservable(value) {\n    return value instanceof Observable ? value : of(value);\n  }\n  hexToRgb(hex) {\n    const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    hex = hex.replace(shorthandRegex, (m, r, g, b) => {\n      return r + r + g + g + b + b;\n    });\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : null;\n  }\n}\nJoyrideOptionsService.ɵfac = function JoyrideOptionsService_Factory(t) {\n  return new (t || JoyrideOptionsService)();\n};\nJoyrideOptionsService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: JoyrideOptionsService,\n  factory: JoyrideOptionsService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideOptionsService, [{\n    type: Injectable\n  }], null, null);\n})();\nconst JOYRIDE = 'ngx-joyride:::';\nclass LoggerService {\n  constructor(optionService) {\n    this.optionService = optionService;\n  }\n  debug(message, data = \"\") {\n    if (this.optionService.areLogsEnabled()) {\n      console.debug(JOYRIDE + message, data);\n    }\n  }\n  info(message, data = \"\") {\n    if (this.optionService.areLogsEnabled()) {\n      console.info(JOYRIDE + message, data);\n    }\n  }\n  warn(message, data = \"\") {\n    if (this.optionService.areLogsEnabled()) {\n      console.warn(JOYRIDE + message, data);\n    }\n  }\n  error(message, data = \"\") {\n    if (this.optionService.areLogsEnabled()) {\n      console.error(JOYRIDE + message, data);\n    }\n  }\n}\nLoggerService.ɵfac = function LoggerService_Factory(t) {\n  return new (t || LoggerService)(i0.ɵɵinject(JoyrideOptionsService));\n};\nLoggerService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: LoggerService,\n  factory: LoggerService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LoggerService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: JoyrideOptionsService\n    }];\n  }, null);\n})();\nconst ROUTE_SEPARATOR = '@';\nclass Step {}\nvar StepActionType;\n(function (StepActionType) {\n  StepActionType[\"NEXT\"] = \"NEXT\";\n  StepActionType[\"PREV\"] = \"PREV\";\n})(StepActionType || (StepActionType = {}));\nclass JoyrideStepsContainerService {\n  constructor(stepOptions, logger) {\n    this.stepOptions = stepOptions;\n    this.logger = logger;\n    this.tempSteps = [];\n    this.currentStepIndex = -2;\n    this.stepHasBeenModified = new Subject();\n  }\n  getFirstStepIndex() {\n    const firstStep = this.stepOptions.getFirstStep();\n    const stepIds = this.stepOptions.getStepsOrder();\n    let index = stepIds.indexOf(firstStep);\n    if (index < 0) {\n      index = 0;\n      if (firstStep !== undefined) this.logger.warn(`The step ${firstStep} does not exist. Check in your step list if it's present.`);\n    }\n    return index;\n  }\n  init() {\n    this.logger.info('Initializing the steps array.');\n    this.steps = [];\n    this.currentStepIndex = this.getFirstStepIndex() - 1;\n    let stepIds = this.stepOptions.getStepsOrder();\n    stepIds.forEach(stepId => this.steps.push({\n      id: stepId,\n      step: null\n    }));\n  }\n  addStep(stepToAdd) {\n    let stepExist = this.tempSteps.filter(step => step.name === stepToAdd.name).length > 0;\n    if (!stepExist) {\n      this.logger.info(`Adding step ${stepToAdd.name} to the steps list.`);\n      this.tempSteps.push(stepToAdd);\n    } else {\n      let stepIndexToReplace = this.tempSteps.findIndex(step => step.name === stepToAdd.name);\n      this.tempSteps[stepIndexToReplace] = stepToAdd;\n    }\n  }\n  get(action) {\n    if (action === StepActionType.NEXT) this.currentStepIndex++;else this.currentStepIndex--;\n    if (this.currentStepIndex < 0 || this.currentStepIndex >= this.steps.length) throw new JoyrideStepOutOfRange('The first or last step of the tour cannot be found!');\n    const stepName = this.getStepName(this.steps[this.currentStepIndex].id);\n    const index = this.tempSteps.findIndex(step => step.name === stepName);\n    let stepFound = this.tempSteps[index];\n    this.steps[this.currentStepIndex].step = stepFound;\n    if (stepFound == null) {\n      this.logger.warn(`Step ${this.steps[this.currentStepIndex].id} not found in the DOM. Check if it's hidden by *ngIf directive.`);\n    }\n    return stepFound;\n  }\n  getStepRoute(action) {\n    let stepID;\n    if (action === StepActionType.NEXT) {\n      stepID = this.steps[this.currentStepIndex + 1] ? this.steps[this.currentStepIndex + 1].id : null;\n    } else {\n      stepID = this.steps[this.currentStepIndex - 1] ? this.steps[this.currentStepIndex - 1].id : null;\n    }\n    let stepRoute = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[1] : '';\n    return stepRoute;\n  }\n  updatePosition(stepName, position) {\n    let index = this.getStepIndex(stepName);\n    if (this.steps[index].step) {\n      this.steps[index].step.position = position;\n      this.stepHasBeenModified.next(this.steps[index].step);\n    } else {\n      this.logger.warn(`Trying to modify the position of ${stepName} to ${position}. Step not found!Is this step located in a different route?`);\n    }\n  }\n  getStepNumber(stepName) {\n    return this.getStepIndex(stepName) + 1;\n  }\n  getStepsCount() {\n    let stepsOrder = this.stepOptions.getStepsOrder();\n    return stepsOrder.length;\n  }\n  getStepIndex(stepName) {\n    const index = this.steps.map(step => step.id.includes(ROUTE_SEPARATOR) ? step.id.split(ROUTE_SEPARATOR)[0] : step.id).findIndex(name => stepName === name);\n    if (index === -1) throw new JoyrideError(`The step with name: ${stepName} does not exist in the step list.`);\n    return index;\n  }\n  getStepName(stepID) {\n    let stepName = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[0] : stepID;\n    return stepName;\n  }\n}\nJoyrideStepsContainerService.ɵfac = function JoyrideStepsContainerService_Factory(t) {\n  return new (t || JoyrideStepsContainerService)(i0.ɵɵinject(JoyrideOptionsService), i0.ɵɵinject(LoggerService));\n};\nJoyrideStepsContainerService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: JoyrideStepsContainerService,\n  factory: JoyrideStepsContainerService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideStepsContainerService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: JoyrideOptionsService\n    }, {\n      type: LoggerService\n    }];\n  }, null);\n})();\nclass DomRefService {\n  constructor(platformId) {\n    this.platformId = platformId;\n    this.fakeDocument = {\n      body: {},\n      documentElement: {}\n    };\n    this.fakeWindow = {\n      document: this.fakeDocument,\n      navigator: {}\n    };\n  }\n  getNativeWindow() {\n    if (isPlatformBrowser(this.platformId)) return window;else return this.fakeWindow;\n  }\n  getNativeDocument() {\n    if (isPlatformBrowser(this.platformId)) return document;else return this.fakeDocument;\n  }\n}\nDomRefService.ɵfac = function DomRefService_Factory(t) {\n  return new (t || DomRefService)(i0.ɵɵinject(PLATFORM_ID));\n};\nDomRefService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: DomRefService,\n  factory: DomRefService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DomRefService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }];\n  }, null);\n})();\nclass TemplatesService {\n  setPrevButton(template) {\n    this._prevButton = template;\n  }\n  getPrevButton() {\n    return this._prevButton;\n  }\n  setNextButton(template) {\n    this._nextButton = template;\n  }\n  getNextButton() {\n    return this._nextButton;\n  }\n  setDoneButton(template) {\n    this._doneButton = template;\n  }\n  getDoneButton() {\n    return this._doneButton;\n  }\n  setCounter(template) {\n    this._counter = template;\n  }\n  getCounter() {\n    return this._counter;\n  }\n}\nTemplatesService.ɵfac = function TemplatesService_Factory(t) {\n  return new (t || TemplatesService)();\n};\nTemplatesService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: TemplatesService,\n  factory: TemplatesService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TemplatesService, [{\n    type: Injectable\n  }], null, null);\n})();\nconst NO_POSITION = 'NO_POSITION';\nclass JoyrideDirective {\n  constructor(joyrideStepsContainer, viewContainerRef, domService, router, templateService, platformId) {\n    this.joyrideStepsContainer = joyrideStepsContainer;\n    this.viewContainerRef = viewContainerRef;\n    this.domService = domService;\n    this.router = router;\n    this.templateService = templateService;\n    this.platformId = platformId;\n    this.stepPosition = NO_POSITION;\n    this.prev = new EventEmitter();\n    this.next = new EventEmitter();\n    this.done = new EventEmitter();\n    this.subscriptions = [];\n    this.windowRef = this.domService.getNativeWindow();\n    this.step = new JoyrideStep();\n  }\n  ngAfterViewInit() {\n    if (!isPlatformBrowser(this.platformId)) return;\n    if (this.prevTemplate) this.templateService.setPrevButton(this.prevTemplate);\n    if (this.nextTemplate) this.templateService.setNextButton(this.nextTemplate);\n    if (this.doneTemplate) this.templateService.setDoneButton(this.doneTemplate);\n    if (this.counterTemplate) this.templateService.setCounter(this.counterTemplate);\n    this.step.position = this.stepPosition;\n    this.step.targetViewContainer = this.viewContainerRef;\n    this.setAsyncFields(this.step);\n    this.step.stepContent = this.stepContent;\n    this.step.stepContentParams = this.stepContentParams;\n    this.step.nextClicked = this.next;\n    this.step.prevCliked = this.prev;\n    this.step.tourDone = this.done;\n    if (!this.name) throw new JoyrideError(\"All the steps should have the 'joyrideStep' property set with a custom name.\");\n    this.step.name = this.name;\n    this.step.route = this.router.url.substr(0, 1) === '/' ? this.router.url.substr(1) : this.router.url;\n    this.step.transformCssStyle = this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform;\n    this.step.isElementOrAncestorFixed = this.isElementFixed(this.viewContainerRef.element) || this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement);\n    this.joyrideStepsContainer.addStep(this.step);\n  }\n  ngOnChanges(changes) {\n    if (changes['title'] || changes['text']) {\n      this.setAsyncFields(this.step);\n    }\n  }\n  isElementFixed(element) {\n    return this.windowRef.getComputedStyle(element.nativeElement).position === 'fixed';\n  }\n  setAsyncFields(step) {\n    if (this.title instanceof Observable) {\n      this.subscriptions.push(this.title.subscribe(title => {\n        step.title.next(title);\n      }));\n    } else {\n      step.title.next(this.title);\n    }\n    if (this.text instanceof Observable) {\n      this.subscriptions.push(this.text.subscribe(text => {\n        step.text.next(text);\n      }));\n    } else {\n      step.text.next(this.text);\n    }\n  }\n  isAncestorsFixed(nativeElement) {\n    if (!nativeElement || !nativeElement.parentElement) return false;\n    let isElementFixed = this.windowRef.getComputedStyle(nativeElement.parentElement).position === 'fixed';\n    if (nativeElement.nodeName === 'BODY') {\n      return isElementFixed;\n    }\n    if (isElementFixed) return true;else return this.isAncestorsFixed(nativeElement.parentElement);\n  }\n  ngOnDestroy() {\n    this.subscriptions.forEach(sub => {\n      sub.unsubscribe();\n    });\n  }\n}\nJoyrideDirective.ɵfac = function JoyrideDirective_Factory(t) {\n  return new (t || JoyrideDirective)(i0.ɵɵdirectiveInject(JoyrideStepsContainerService), i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(DomRefService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(TemplatesService), i0.ɵɵdirectiveInject(PLATFORM_ID));\n};\nJoyrideDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: JoyrideDirective,\n  selectors: [[\"joyrideStep\"], [\"\", \"joyrideStep\", \"\"]],\n  inputs: {\n    name: [\"joyrideStep\", \"name\"],\n    nextStep: \"nextStep\",\n    title: \"title\",\n    text: \"text\",\n    stepPosition: \"stepPosition\",\n    stepContent: \"stepContent\",\n    stepContentParams: \"stepContentParams\",\n    prevTemplate: \"prevTemplate\",\n    nextTemplate: \"nextTemplate\",\n    doneTemplate: \"doneTemplate\",\n    counterTemplate: \"counterTemplate\"\n  },\n  outputs: {\n    prev: \"prev\",\n    next: \"next\",\n    done: \"done\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideDirective, [{\n    type: Directive,\n    args: [{\n      selector: 'joyrideStep, [joyrideStep]'\n    }]\n  }], function () {\n    return [{\n      type: JoyrideStepsContainerService\n    }, {\n      type: i0.ViewContainerRef\n    }, {\n      type: DomRefService\n    }, {\n      type: i3.Router\n    }, {\n      type: TemplatesService\n    }, {\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }];\n  }, {\n    name: [{\n      type: Input,\n      args: ['joyrideStep']\n    }],\n    nextStep: [{\n      type: Input\n    }],\n    title: [{\n      type: Input\n    }],\n    text: [{\n      type: Input\n    }],\n    stepPosition: [{\n      type: Input\n    }],\n    stepContent: [{\n      type: Input\n    }],\n    stepContentParams: [{\n      type: Input\n    }],\n    prevTemplate: [{\n      type: Input\n    }],\n    nextTemplate: [{\n      type: Input\n    }],\n    doneTemplate: [{\n      type: Input\n    }],\n    counterTemplate: [{\n      type: Input\n    }],\n    prev: [{\n      type: Output\n    }],\n    next: [{\n      type: Output\n    }],\n    done: [{\n      type: Output\n    }]\n  });\n})();\nclass JoyrideStepInfo {}\nclass DocumentService {\n  constructor(DOMService, platformId) {\n    this.DOMService = DOMService;\n    if (!isPlatformBrowser(platformId)) {\n      return;\n    }\n    this.setDocumentHeight();\n    var doc = DOMService.getNativeDocument();\n    if (doc && !doc.elementsFromPoint) {\n      // IE 11 - Edge browsers\n      doc.elementsFromPoint = this.elementsFromPoint.bind(this);\n    }\n  }\n  getElementFixedTop(elementRef) {\n    return elementRef.nativeElement.getBoundingClientRect().top;\n  }\n  getElementFixedLeft(elementRef) {\n    return elementRef.nativeElement.getBoundingClientRect().left;\n  }\n  getElementAbsoluteTop(elementRef) {\n    const scrollOffsets = this.getScrollOffsets();\n    return elementRef.nativeElement.getBoundingClientRect().top + scrollOffsets.y;\n  }\n  getElementAbsoluteLeft(elementRef) {\n    const scrollOffsets = this.getScrollOffsets();\n    return elementRef.nativeElement.getBoundingClientRect().left + scrollOffsets.x;\n  }\n  setDocumentHeight() {\n    this.documentHeight = this.calculateDocumentHeight();\n  }\n  getDocumentHeight() {\n    return this.documentHeight;\n  }\n  isParentScrollable(elementRef) {\n    return this.getFirstScrollableParent(elementRef.nativeElement) !== this.DOMService.getNativeDocument().body;\n  }\n  isElementBeyondOthers(elementRef, isElementFixed, keywordToDiscard) {\n    const x1 = isElementFixed ? this.getElementFixedLeft(elementRef) : this.getElementAbsoluteLeft(elementRef);\n    const y1 = isElementFixed ? this.getElementFixedTop(elementRef) : this.getElementAbsoluteTop(elementRef);\n    const x2 = x1 + elementRef.nativeElement.getBoundingClientRect().width - 1;\n    const y2 = y1 + elementRef.nativeElement.getBoundingClientRect().height - 1;\n    const elements1 = this.DOMService.getNativeDocument().elementsFromPoint(x1, y1);\n    const elements2 = this.DOMService.getNativeDocument().elementsFromPoint(x2, y2);\n    if (elements1.length === 0 && elements2.length === 0) return 1;\n    if (this.getFirstElementWithoutKeyword(elements1, keywordToDiscard) !== elementRef.nativeElement || this.getFirstElementWithoutKeyword(elements2, keywordToDiscard) !== elementRef.nativeElement) {\n      return 2;\n    }\n    return 3;\n  }\n  scrollIntoView(elementRef, isElementFixed) {\n    const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\n    const top = isElementFixed ? this.getElementFixedTop(elementRef) : this.getElementAbsoluteTop(elementRef);\n    if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\n      if (firstScrollableParent.scrollTo) {\n        firstScrollableParent.scrollTo(0, top - 150);\n      } else {\n        // IE 11 - Edge browsers\n        firstScrollableParent.scrollTop = top - 150;\n      }\n    } else {\n      this.DOMService.getNativeWindow().scrollTo(0, top - 150);\n    }\n  }\n  scrollToTheTop(elementRef) {\n    const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\n    if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\n      if (firstScrollableParent.scrollTo) {\n        firstScrollableParent.scrollTo(0, 0);\n      } else {\n        // IE 11 - Edge browsers\n        firstScrollableParent.scrollTop = 0;\n      }\n    } else {\n      this.DOMService.getNativeWindow().scrollTo(0, 0);\n    }\n  }\n  scrollToTheBottom(elementRef) {\n    const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\n    if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\n      if (firstScrollableParent.scrollTo) {\n        firstScrollableParent.scrollTo(0, this.DOMService.getNativeDocument().body.scrollHeight);\n      } else {\n        // IE 11 - Edge browsers\n        firstScrollableParent.scrollTop = firstScrollableParent.scrollHeight - firstScrollableParent.clientHeight;\n      }\n    } else {\n      this.DOMService.getNativeWindow().scrollTo(0, this.DOMService.getNativeDocument().body.scrollHeight);\n    }\n  }\n  getFirstScrollableParent(node) {\n    const regex = /(auto|scroll|overlay)/;\n    const style = (node, prop) => this.DOMService.getNativeWindow().getComputedStyle(node, null).getPropertyValue(prop);\n    const scroll = node => regex.test(style(node, 'overflow') + style(node, 'overflow-y') + style(node, 'overflow-x'));\n    const scrollparent = node => {\n      return !node || node === this.DOMService.getNativeDocument().body ? this.DOMService.getNativeDocument().body : scroll(node) ? node : scrollparent(node.parentNode);\n    };\n    return scrollparent(node);\n  }\n  calculateDocumentHeight() {\n    const documentRef = this.DOMService.getNativeDocument();\n    return Math.max(documentRef.body.scrollHeight, documentRef.documentElement.scrollHeight, documentRef.body.offsetHeight, documentRef.documentElement.offsetHeight, documentRef.body.clientHeight, documentRef.documentElement.clientHeight);\n  }\n  getScrollOffsets() {\n    const winReference = this.DOMService.getNativeWindow();\n    const docReference = this.DOMService.getNativeDocument();\n    // This works for all browsers except IE versions 8 and before\n    if (winReference.pageXOffset != null) return {\n      x: winReference.pageXOffset,\n      y: winReference.pageYOffset\n    };\n    // For IE (or any browser) in Standards mode\n    if (docReference.compatMode == 'CSS1Compat') return {\n      x: docReference.documentElement.scrollLeft,\n      y: docReference.documentElement.scrollTop\n    };\n    // For browsers in Quirks mode\n    return {\n      x: docReference.body.scrollLeft,\n      y: docReference.body.scrollTop\n    };\n  }\n  elementsFromPoint(x, y) {\n    var parents = [];\n    var parent = void 0;\n    do {\n      const elem = this.DOMService.getNativeDocument().elementFromPoint(x, y);\n      if (elem && parent !== elem) {\n        parent = elem;\n        parents.push(parent);\n        parent.style.pointerEvents = 'none';\n      } else {\n        parent = false;\n      }\n    } while (parent);\n    parents.forEach(function (parent) {\n      return parent.style.pointerEvents = 'all';\n    });\n    return parents;\n  }\n  getFirstElementWithoutKeyword(elements, keyword) {\n    while (elements[0] && elements[0].classList.toString().includes(keyword)) {\n      elements.shift();\n    }\n    return elements[0];\n  }\n}\nDocumentService.ɵfac = function DocumentService_Factory(t) {\n  return new (t || DocumentService)(i0.ɵɵinject(DomRefService), i0.ɵɵinject(PLATFORM_ID));\n};\nDocumentService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: DocumentService,\n  factory: DocumentService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DocumentService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: DomRefService\n    }, {\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }];\n  }, null);\n})();\nclass JoyrideBackdropService {\n  constructor(documentService, optionsService, rendererFactory) {\n    this.documentService = documentService;\n    this.optionsService = optionsService;\n    this.rendererFactory = rendererFactory;\n    this.lastXScroll = 0;\n    this.lastYScroll = 0;\n    this.setRenderer();\n  }\n  setRenderer() {\n    this.renderer = this.rendererFactory.createRenderer(null, null);\n  }\n  draw(step) {\n    this.elementRef = step.targetViewContainer;\n    this.targetAbsoluteTop = this.getTargetTotalTop(step);\n    this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\n    this.currentBackdropContainer = this.renderer.createElement('div');\n    this.renderer.addClass(this.currentBackdropContainer, 'backdrop-container');\n    this.renderer.setStyle(this.currentBackdropContainer, 'position', 'fixed');\n    this.renderer.setStyle(this.currentBackdropContainer, 'top', '0px');\n    this.renderer.setStyle(this.currentBackdropContainer, 'left', '0px');\n    this.renderer.setStyle(this.currentBackdropContainer, 'width', '100%');\n    this.renderer.setStyle(this.currentBackdropContainer, 'height', '100%');\n    this.renderer.setStyle(this.currentBackdropContainer, 'z-index', '1000');\n    this.renderer.setAttribute(this.currentBackdropContainer, 'id', 'backdrop-' + step.name);\n    this.backdropContent = this.renderer.createElement('div');\n    this.renderer.addClass(this.backdropContent, 'backdrop-content');\n    this.renderer.setStyle(this.backdropContent, 'position', 'relative');\n    this.renderer.setStyle(this.backdropContent, 'height', '100%');\n    this.renderer.setStyle(this.backdropContent, 'display', 'flex');\n    this.renderer.setStyle(this.backdropContent, 'flex-direction', 'column');\n    this.renderer.appendChild(this.currentBackdropContainer, this.backdropContent);\n    this.backdropTop = this.renderer.createElement('div');\n    this.renderer.addClass(this.backdropTop, 'joyride-backdrop');\n    this.renderer.addClass(this.backdropTop, 'backdrop-top');\n    this.renderer.setStyle(this.backdropTop, 'width', '100%');\n    this.renderer.setStyle(this.backdropTop, 'height', this.targetAbsoluteTop - this.lastYScroll + 'px');\n    this.renderer.setStyle(this.backdropTop, 'flex-shrink', '0');\n    this.renderer.setStyle(this.backdropTop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n    this.renderer.appendChild(this.backdropContent, this.backdropTop);\n    this.backdropMiddleContainer = this.renderer.createElement('div');\n    this.renderer.addClass(this.backdropMiddleContainer, 'backdrop-middle-container');\n    this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\n    this.renderer.setStyle(this.backdropMiddleContainer, 'width', '100%');\n    this.renderer.setStyle(this.backdropMiddleContainer, 'flex-shrink', '0');\n    this.renderer.appendChild(this.backdropContent, this.backdropMiddleContainer);\n    this.backdropMiddleContent = this.renderer.createElement('div');\n    this.renderer.addClass(this.backdropMiddleContent, 'backdrop-middle-content');\n    this.renderer.setStyle(this.backdropMiddleContent, 'display', 'flex');\n    this.renderer.setStyle(this.backdropMiddleContent, 'width', '100%');\n    this.renderer.setStyle(this.backdropMiddleContent, 'height', '100%');\n    this.renderer.appendChild(this.backdropMiddleContainer, this.backdropMiddleContent);\n    this.leftBackdrop = this.renderer.createElement('div');\n    this.renderer.addClass(this.leftBackdrop, 'joyride-backdrop');\n    this.renderer.addClass(this.leftBackdrop, 'backdrop-left');\n    this.renderer.setStyle(this.leftBackdrop, 'flex-shrink', '0');\n    this.renderer.setStyle(this.leftBackdrop, 'width', this.targetAbsoluteLeft - this.lastXScroll + 'px');\n    this.renderer.setStyle(this.leftBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n    this.renderer.appendChild(this.backdropMiddleContent, this.leftBackdrop);\n    this.targetBackdrop = this.renderer.createElement('div');\n    this.renderer.addClass(this.targetBackdrop, 'backdrop-target');\n    this.renderer.setStyle(this.targetBackdrop, 'flex-shrink', '0');\n    this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\n    this.renderer.appendChild(this.backdropMiddleContent, this.targetBackdrop);\n    this.rightBackdrop = this.renderer.createElement('div');\n    this.renderer.addClass(this.rightBackdrop, 'joyride-backdrop');\n    this.renderer.addClass(this.rightBackdrop, 'backdrop-right');\n    this.renderer.setStyle(this.rightBackdrop, 'width', '100%');\n    this.renderer.setStyle(this.rightBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n    this.renderer.appendChild(this.backdropMiddleContent, this.rightBackdrop);\n    this.backdropBottom = this.renderer.createElement('div');\n    this.renderer.addClass(this.backdropBottom, 'joyride-backdrop');\n    this.renderer.addClass(this.backdropBottom, 'backdrop-bottom');\n    this.renderer.setStyle(this.backdropBottom, 'width', '100%');\n    this.renderer.setStyle(this.backdropBottom, 'height', '100%');\n    this.renderer.setStyle(this.backdropBottom, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n    this.renderer.appendChild(this.backdropContent, this.backdropBottom);\n    this.removeLastBackdrop();\n    this.drawCurrentBackdrop();\n    this.lastBackdropContainer = this.currentBackdropContainer;\n  }\n  remove() {\n    this.removeLastBackdrop();\n  }\n  redrawTarget(step) {\n    this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\n    this.targetAbsoluteTop = this.getTargetTotalTop(step);\n    this.handleVerticalScroll(step);\n    this.handleHorizontalScroll(step);\n  }\n  getTargetTotalTop(step) {\n    let targetVC = step.targetViewContainer;\n    return step.isElementOrAncestorFixed ? this.documentService.getElementFixedTop(targetVC.element) : this.documentService.getElementAbsoluteTop(targetVC.element);\n  }\n  getTargetTotalLeft(step) {\n    let targetVC = step.targetViewContainer;\n    return step.isElementOrAncestorFixed ? this.documentService.getElementFixedLeft(targetVC.element) : this.documentService.getElementAbsoluteLeft(targetVC.element);\n  }\n  redraw(step, scroll) {\n    if (this.lastYScroll !== scroll.scrollY) {\n      this.lastYScroll = scroll.scrollY;\n      if (this.elementRef) {\n        this.handleVerticalScroll(step);\n      }\n    }\n    if (this.lastXScroll !== scroll.scrollX) {\n      this.lastXScroll = scroll.scrollX;\n      if (this.elementRef) {\n        this.handleHorizontalScroll(step);\n      }\n    }\n  }\n  handleHorizontalScroll(step) {\n    let newBackdropLeftWidth = step.isElementOrAncestorFixed ? this.targetAbsoluteLeft : this.targetAbsoluteLeft - this.lastXScroll;\n    if (newBackdropLeftWidth >= 0) {\n      this.renderer.setStyle(this.leftBackdrop, 'width', newBackdropLeftWidth + 'px');\n      this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\n    } else {\n      this.handleTargetPartialWidth(newBackdropLeftWidth);\n    }\n  }\n  handleTargetPartialWidth(newBackdropLeftWidth) {\n    this.renderer.setStyle(this.leftBackdrop, 'width', 0 + 'px');\n    let visibleTargetWidth = this.elementRef.element.nativeElement.offsetWidth + newBackdropLeftWidth;\n    if (visibleTargetWidth >= 0) {\n      this.renderer.setStyle(this.targetBackdrop, 'width', visibleTargetWidth + 'px');\n    } else {\n      this.renderer.setStyle(this.targetBackdrop, 'width', 0 + 'px');\n    }\n  }\n  handleVerticalScroll(step) {\n    let newBackdropTopHeight = step.isElementOrAncestorFixed ? this.targetAbsoluteTop : this.targetAbsoluteTop - this.lastYScroll;\n    if (newBackdropTopHeight >= 0) {\n      this.renderer.setStyle(this.backdropTop, 'height', newBackdropTopHeight + 'px');\n      this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\n    } else {\n      this.handleTargetPartialHeight(newBackdropTopHeight);\n    }\n  }\n  handleTargetPartialHeight(newBackdropTopHeight) {\n    this.renderer.setStyle(this.backdropTop, 'height', 0 + 'px');\n    let visibleTargetHeight = this.elementRef.element.nativeElement.offsetHeight + newBackdropTopHeight;\n    if (visibleTargetHeight >= 0) {\n      this.renderer.setStyle(this.backdropMiddleContainer, 'height', visibleTargetHeight + 'px');\n    } else {\n      this.renderer.setStyle(this.backdropMiddleContainer, 'height', 0 + 'px');\n    }\n  }\n  removeLastBackdrop() {\n    if (this.lastBackdropContainer) {\n      this.renderer.removeChild(document.body, this.lastBackdropContainer);\n      this.lastBackdropContainer = undefined;\n    }\n  }\n  drawCurrentBackdrop() {\n    this.renderer.appendChild(document.body, this.currentBackdropContainer);\n  }\n}\nJoyrideBackdropService.ɵfac = function JoyrideBackdropService_Factory(t) {\n  return new (t || JoyrideBackdropService)(i0.ɵɵinject(DocumentService), i0.ɵɵinject(JoyrideOptionsService), i0.ɵɵinject(i0.RendererFactory2));\n};\nJoyrideBackdropService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: JoyrideBackdropService,\n  factory: JoyrideBackdropService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideBackdropService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: DocumentService\n    }, {\n      type: JoyrideOptionsService\n    }, {\n      type: i0.RendererFactory2\n    }];\n  }, null);\n})();\nclass Scroll {}\nclass EventListenerService {\n  constructor(rendererFactory, DOMService) {\n    this.rendererFactory = rendererFactory;\n    this.DOMService = DOMService;\n    this.scrollEvent = new Subject();\n    this.resizeEvent = new Subject();\n    this.renderer = rendererFactory.createRenderer(null, null);\n  }\n  startListeningScrollEvents() {\n    this.scrollUnlisten = this.renderer.listen('document', 'scroll', evt => {\n      this.scrollEvent.next({\n        scrollX: this.DOMService.getNativeWindow().pageXOffset,\n        scrollY: this.DOMService.getNativeWindow().pageYOffset\n      });\n    });\n  }\n  startListeningResizeEvents() {\n    this.resizeUnlisten = this.renderer.listen('window', 'resize', evt => {\n      this.resizeEvent.next(evt);\n    });\n  }\n  stopListeningScrollEvents() {\n    this.scrollUnlisten();\n  }\n  stopListeningResizeEvents() {\n    this.resizeUnlisten();\n  }\n}\nEventListenerService.ɵfac = function EventListenerService_Factory(t) {\n  return new (t || EventListenerService)(i0.ɵɵinject(i0.RendererFactory2), i0.ɵɵinject(DomRefService));\n};\nEventListenerService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: EventListenerService,\n  factory: EventListenerService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(EventListenerService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i0.RendererFactory2\n    }, {\n      type: DomRefService\n    }];\n  }, null);\n})();\nclass JoyrideArrowComponent {\n  constructor() {\n    this.position = 'top';\n  }\n}\nJoyrideArrowComponent.ɵfac = function JoyrideArrowComponent_Factory(t) {\n  return new (t || JoyrideArrowComponent)();\n};\nJoyrideArrowComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: JoyrideArrowComponent,\n  selectors: [[\"joyride-arrow\"]],\n  inputs: {\n    position: \"position\"\n  },\n  decls: 1,\n  vars: 8,\n  template: function JoyrideArrowComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"div\");\n    }\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"joyride-arrow__top\", ctx.position == \"top\")(\"joyride-arrow__bottom\", ctx.position == \"bottom\")(\"joyride-arrow__left\", ctx.position == \"left\")(\"joyride-arrow__right\", ctx.position == \"right\");\n    }\n  },\n  styles: [\".joyride-arrow__top{border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #ffffff}.joyride-arrow__bottom{border-left:11px solid transparent;border-right:11px solid transparent;border-top:11px solid #ffffff}.joyride-arrow__right{border-left:11px solid #ffffff;border-bottom:11px solid transparent;border-top:11px solid transparent}.joyride-arrow__left{border-right:11px solid #ffffff;border-top:11px solid transparent;border-bottom:11px solid transparent}\\n\"],\n  encapsulation: 2\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideArrowComponent, [{\n    type: Component,\n    args: [{\n      selector: 'joyride-arrow',\n      encapsulation: ViewEncapsulation.None,\n      template: \"<div [class.joyride-arrow__top]=\\\"position == 'top'\\\"\\n     [class.joyride-arrow__bottom]=\\\"position == 'bottom'\\\"\\n     [class.joyride-arrow__left]=\\\"position == 'left'\\\"\\n     [class.joyride-arrow__right]=\\\"position == 'right'\\\">\\n</div>\",\n      styles: [\".joyride-arrow__top{border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #ffffff}.joyride-arrow__bottom{border-left:11px solid transparent;border-right:11px solid transparent;border-top:11px solid #ffffff}.joyride-arrow__right{border-left:11px solid #ffffff;border-bottom:11px solid transparent;border-top:11px solid transparent}.joyride-arrow__left{border-right:11px solid #ffffff;border-top:11px solid transparent;border-bottom:11px solid transparent}\\n\"]\n    }]\n  }], null, {\n    position: [{\n      type: Input\n    }]\n  });\n})();\nclass JoyrideCloseButtonComponent {}\nJoyrideCloseButtonComponent.ɵfac = function JoyrideCloseButtonComponent_Factory(t) {\n  return new (t || JoyrideCloseButtonComponent)();\n};\nJoyrideCloseButtonComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: JoyrideCloseButtonComponent,\n  selectors: [[\"joy-close-button\"]],\n  decls: 3,\n  vars: 0,\n  consts: [[\"viewBox\", \"0 0 25 25\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"x1\", \"1\", \"y1\", \"24\", \"x2\", \"24\", \"y2\", \"1\", \"stroke\", \"black\", \"stroke-width\", \"3\"], [\"x1\", \"1\", \"y1\", \"1\", \"x2\", \"24\", \"y2\", \"24\", \"stroke\", \"black\", \"stroke-width\", \"3\"]],\n  template: function JoyrideCloseButtonComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(0, \"svg\", 0);\n      i0.ɵɵelement(1, \"line\", 1)(2, \"line\", 2);\n      i0.ɵɵelementEnd();\n    }\n  },\n  encapsulation: 2\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideCloseButtonComponent, [{\n    type: Component,\n    args: [{\n      selector: 'joy-close-button',\n      template: `<svg viewBox=\"0 0 25 25\" xmlns=\"http://www.w3.org/2000/svg\">\n                <line x1=\"1\" y1=\"24\" \n                    x2=\"24\" y2=\"1\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n                <line x1=\"1\" y1=\"1\" \n                    x2=\"24\" y2=\"24\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n            </svg>`\n    }]\n  }], null, null);\n})();\nclass JoyrideButtonComponent {\n  constructor() {\n    this.clicked = new EventEmitter();\n  }\n  onClick() {\n    this.clicked.emit();\n  }\n}\nJoyrideButtonComponent.ɵfac = function JoyrideButtonComponent_Factory(t) {\n  return new (t || JoyrideButtonComponent)();\n};\nJoyrideButtonComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: JoyrideButtonComponent,\n  selectors: [[\"joyride-button\"]],\n  inputs: {\n    color: \"color\"\n  },\n  outputs: {\n    clicked: \"clicked\"\n  },\n  ngContentSelectors: _c1,\n  decls: 2,\n  vars: 5,\n  consts: [[1, \"joyride-button\", 3, \"ngStyle\", \"mouseleave\", \"mouseover\", \"click\"]],\n  template: function JoyrideButtonComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵelementStart(0, \"button\", 0);\n      i0.ɵɵlistener(\"mouseleave\", function JoyrideButtonComponent_Template_button_mouseleave_0_listener() {\n        return ctx.hover = false;\n      })(\"mouseover\", function JoyrideButtonComponent_Template_button_mouseover_0_listener() {\n        return ctx.hover = true;\n      })(\"click\", function JoyrideButtonComponent_Template_button_click_0_listener() {\n        return ctx.onClick();\n      });\n      i0.ɵɵprojection(1);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction3(1, _c0, ctx.hover ? \"#fff\" : ctx.color, ctx.hover ? ctx.color : \"#fff\", ctx.hover ? ctx.color : \"transparent\"));\n    }\n  },\n  dependencies: [i10.NgStyle],\n  styles: [\".joyride-button[_ngcontent-%COMP%]{text-transform:uppercase;border:2px solid transparent;outline:none;padding:6px 12px;font-size:12px;font-weight:700;color:#fff;background-color:#3b5560;cursor:pointer}.joyride-button[_ngcontent-%COMP%]:hover{color:#3b5560;border:2px solid #3b5560;background-color:#fff}\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideButtonComponent, [{\n    type: Component,\n    args: [{\n      selector: 'joyride-button',\n      template: \"<button (mouseleave)=\\\"hover=false\\\" (mouseover)=\\\"hover=true\\\"\\n    [ngStyle]=\\\"{'background-color': hover ? '#fff' : color, \\n                'color': hover ? color : '#fff',\\n                'border-color' : hover ? color : 'transparent'}\\\"\\n    class=\\\"joyride-button\\\" (click)=\\\"onClick()\\\">\\n    <ng-content></ng-content>\\n</button>\",\n      styles: [\".joyride-button{text-transform:uppercase;border:2px solid transparent;outline:none;padding:6px 12px;font-size:12px;font-weight:700;color:#fff;background-color:#3b5560;cursor:pointer}.joyride-button:hover{color:#3b5560;border:2px solid #3b5560;background-color:#fff}\\n\"]\n    }]\n  }], null, {\n    color: [{\n      type: Input\n    }],\n    clicked: [{\n      type: Output\n    }]\n  });\n})();\nconst STEP_MIN_WIDTH = 200;\nconst STEP_MAX_WIDTH = 400;\nconst CUSTOM_STEP_MAX_WIDTH_VW = 90;\nconst STEP_HEIGHT = 200;\nconst ASPECT_RATIO = 1.212;\nconst DEFAULT_DISTANCE_FROM_MARGIN_TOP = 2;\nconst DEFAULT_DISTANCE_FROM_MARGIN_LEFT = 2;\nconst DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM = 5;\nconst DEFAULT_DISTANCE_FROM_MARGIN_RIGHT = 5;\nvar KEY_CODE;\n(function (KEY_CODE) {\n  KEY_CODE[KEY_CODE[\"RIGHT_ARROW\"] = 39] = \"RIGHT_ARROW\";\n  KEY_CODE[KEY_CODE[\"LEFT_ARROW\"] = 37] = \"LEFT_ARROW\";\n  KEY_CODE[KEY_CODE[\"ESCAPE_KEY\"] = 27] = \"ESCAPE_KEY\";\n})(KEY_CODE || (KEY_CODE = {}));\nclass JoyrideStepComponent {\n  constructor(injector, stepsContainerService, eventListenerService, documentService, renderer, logger, optionsService, templateService) {\n    this.injector = injector;\n    this.stepsContainerService = stepsContainerService;\n    this.eventListenerService = eventListenerService;\n    this.documentService = documentService;\n    this.renderer = renderer;\n    this.logger = logger;\n    this.optionsService = optionsService;\n    this.templateService = templateService;\n    this.stepWidth = STEP_MIN_WIDTH;\n    this.stepHeight = STEP_HEIGHT;\n    this.showArrow = true;\n    this.arrowSize = ARROW_SIZE;\n    this.subscriptions = [];\n  }\n  ngOnInit() {\n    // Need to Inject here otherwise you will obtain a circular dependency\n    this.joyrideStepService = this.injector.get(JoyrideStepService);\n    this.documentHeight = this.documentService.getDocumentHeight();\n    this.subscriptions.push(this.subscribeToResizeEvents());\n    this.title = this.step.title.asObservable();\n    this.text = this.step.text.asObservable();\n    this.setCustomTemplates();\n    this.setCustomTexts();\n    this.counter = this.getCounter();\n    this.isCounterVisible = this.optionsService.isCounterVisible();\n    this.isPrevButtonVisible = this.optionsService.isPrevButtonVisible();\n    this.themeColor = this.optionsService.getThemeColor();\n    if (this.text) this.text.subscribe(val => this.checkRedraw(val));\n    if (this.title) this.title.subscribe(val => this.checkRedraw(val));\n  }\n  ngAfterViewInit() {\n    if (this.isCustomized()) {\n      this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', CUSTOM_STEP_MAX_WIDTH_VW + 'vw');\n      this.updateStepDimensions();\n    } else {\n      this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', STEP_MAX_WIDTH + 'px');\n      let dimensions = this.getDimensionsByAspectRatio(this.stepContainer.nativeElement.clientWidth, this.stepContainer.nativeElement.clientHeight, ASPECT_RATIO);\n      dimensions = this.adjustDimensions(dimensions.width, dimensions.height);\n      this.stepWidth = dimensions.width;\n      this.stepHeight = dimensions.height;\n      this.renderer.setStyle(this.stepContainer.nativeElement, 'width', this.stepWidth + 'px');\n      this.renderer.setStyle(this.stepContainer.nativeElement, 'height', this.stepHeight + 'px');\n    }\n    this.drawStep();\n  }\n  checkRedraw(val) {\n    if (val != null) {\n      // Need to wait that the change is rendered before redrawing\n      setTimeout(() => {\n        this.redrawStep();\n      }, 2);\n    }\n  }\n  isCustomized() {\n    return this.step.stepContent || this.templateService.getCounter() || this.templateService.getPrevButton() || this.templateService.getNextButton() || this.templateService.getDoneButton();\n  }\n  setCustomTexts() {\n    const customeTexts = this.optionsService.getCustomTexts();\n    this.prevText = customeTexts.prev;\n    this.nextText = customeTexts.next;\n    this.doneText = customeTexts.done;\n  }\n  drawStep() {\n    let position = this.step.isElementOrAncestorFixed ? 'fixed' : 'absolute';\n    this.renderer.setStyle(this.stepHolder.nativeElement, 'position', position);\n    this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', this.step.transformCssStyle);\n    this.targetWidth = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width;\n    this.targetHeight = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height;\n    this.targetAbsoluteLeft = position === 'fixed' ? this.documentService.getElementFixedLeft(this.step.targetViewContainer.element) : this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element);\n    this.targetAbsoluteTop = position === 'fixed' ? this.documentService.getElementFixedTop(this.step.targetViewContainer.element) : this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element);\n    this.setStepStyle();\n  }\n  getCounter() {\n    let stepPosition = this.stepsContainerService.getStepNumber(this.step.name);\n    let numberOfSteps = this.stepsContainerService.getStepsCount();\n    this.counterData = {\n      step: stepPosition,\n      total: numberOfSteps\n    };\n    return stepPosition + '/' + numberOfSteps;\n  }\n  setCustomTemplates() {\n    this.customContent = this.step.stepContent;\n    this.ctx = this.step.stepContentParams;\n    this.customPrevButton = this.templateService.getPrevButton();\n    this.customNextButton = this.templateService.getNextButton();\n    this.customDoneButton = this.templateService.getDoneButton();\n    this.customCounter = this.templateService.getCounter();\n  }\n  keyEvent(event) {\n    console.log(event);\n    if (event.keyCode === KEY_CODE.RIGHT_ARROW) {\n      if (this.isLastStep()) {\n        this.close();\n      } else {\n        this.next();\n      }\n    } else if (event.keyCode === KEY_CODE.LEFT_ARROW) {\n      this.prev();\n    } else if (event.keyCode === KEY_CODE.ESCAPE_KEY) {\n      this.close();\n    }\n  }\n  prev() {\n    this.joyrideStepService.prev();\n  }\n  next() {\n    this.joyrideStepService.next();\n  }\n  close() {\n    this.joyrideStepService.close();\n  }\n  isFirstStep() {\n    return this.stepsContainerService.getStepNumber(this.step.name) === 1;\n  }\n  isLastStep() {\n    return this.stepsContainerService.getStepNumber(this.step.name) === this.stepsContainerService.getStepsCount();\n  }\n  setStepStyle() {\n    switch (this.step.position) {\n      case 'top':\n        {\n          this.setStyleTop();\n          break;\n        }\n      case 'bottom':\n        {\n          this.setStyleBottom();\n          break;\n        }\n      case 'right':\n        {\n          this.setStyleRight();\n          break;\n        }\n      case 'left':\n        {\n          this.setStyleLeft();\n          break;\n        }\n      case 'center':\n        {\n          this.setStyleCenter();\n          break;\n        }\n      default:\n        {\n          this.setStyleBottom();\n        }\n    }\n  }\n  setStyleTop() {\n    this.stepsContainerService.updatePosition(this.step.name, 'top');\n    this.topPosition = this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\n    this.stepAbsoluteTop = this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\n    this.arrowTopPosition = this.stepHeight;\n    this.leftPosition = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n    this.stepAbsoluteLeft = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n    this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\n    this.adjustLeftPosition();\n    this.adjustRightPosition();\n    this.arrowPosition = 'bottom';\n    this.autofixTopPosition();\n  }\n  setStyleRight() {\n    this.stepsContainerService.updatePosition(this.step.name, 'right');\n    this.topPosition = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\n    this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\n    this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\n    this.leftPosition = this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\n    this.stepAbsoluteLeft = this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\n    this.arrowLeftPosition = -this.arrowSize;\n    this.adjustTopPosition();\n    this.adjustBottomPosition();\n    this.arrowPosition = 'left';\n    this.autofixRightPosition();\n  }\n  setStyleBottom() {\n    this.stepsContainerService.updatePosition(this.step.name, 'bottom');\n    this.topPosition = this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\n    this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\n    this.arrowTopPosition = -this.arrowSize;\n    this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\n    this.leftPosition = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n    this.stepAbsoluteLeft = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n    this.adjustLeftPosition();\n    this.adjustRightPosition();\n    this.arrowPosition = 'top';\n    this.autofixBottomPosition();\n  }\n  setStyleLeft() {\n    this.stepsContainerService.updatePosition(this.step.name, 'left');\n    this.topPosition = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\n    this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\n    this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\n    this.leftPosition = this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\n    this.stepAbsoluteLeft = this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\n    this.arrowLeftPosition = this.stepWidth;\n    this.adjustTopPosition();\n    this.adjustBottomPosition();\n    this.arrowPosition = 'right';\n    this.autofixLeftPosition();\n  }\n  setStyleCenter() {\n    this.renderer.setStyle(this.stepHolder.nativeElement, 'position', 'fixed');\n    this.renderer.setStyle(this.stepHolder.nativeElement, 'top', '50%');\n    this.renderer.setStyle(this.stepHolder.nativeElement, 'left', '50%');\n    this.updateStepDimensions();\n    this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', `translate(-${this.stepWidth / 2}px, -${this.stepHeight / 2}px)`);\n    this.showArrow = false;\n  }\n  adjustLeftPosition() {\n    if (this.leftPosition < 0) {\n      this.arrowLeftPosition = this.arrowLeftPosition + this.leftPosition - DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\n      this.leftPosition = DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\n    }\n  }\n  adjustRightPosition() {\n    let currentWindowWidth = document.body.clientWidth;\n    if (this.stepAbsoluteLeft + this.stepWidth > currentWindowWidth) {\n      let newLeftPos = this.leftPosition - (this.stepAbsoluteLeft + this.stepWidth + DEFAULT_DISTANCE_FROM_MARGIN_RIGHT - currentWindowWidth);\n      let deltaLeftPosition = newLeftPos - this.leftPosition;\n      this.leftPosition = newLeftPos;\n      this.arrowLeftPosition = this.arrowLeftPosition - deltaLeftPosition;\n    }\n  }\n  adjustTopPosition() {\n    if (this.stepAbsoluteTop < 0) {\n      this.arrowTopPosition = this.arrowTopPosition + this.topPosition - DEFAULT_DISTANCE_FROM_MARGIN_TOP;\n      this.topPosition = DEFAULT_DISTANCE_FROM_MARGIN_TOP;\n    }\n  }\n  adjustBottomPosition() {\n    if (this.stepAbsoluteTop + this.stepHeight > this.documentHeight) {\n      let newTopPos = this.topPosition - (this.stepAbsoluteTop + this.stepHeight + DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM - this.documentHeight);\n      let deltaTopPosition = newTopPos - this.topPosition;\n      this.topPosition = newTopPos;\n      this.arrowTopPosition = this.arrowTopPosition - deltaTopPosition;\n    }\n  }\n  autofixTopPosition() {\n    if (this.positionAlreadyFixed) {\n      this.logger.warn('No step positions found for this step. The step will be centered.');\n    } else if (this.targetAbsoluteTop - this.stepHeight - this.arrowSize < 0) {\n      this.positionAlreadyFixed = true;\n      this.setStyleRight();\n    }\n  }\n  autofixRightPosition() {\n    if (this.targetAbsoluteLeft + this.targetWidth + this.stepWidth + this.arrowSize > document.body.clientWidth) {\n      this.setStyleBottom();\n    }\n  }\n  autofixBottomPosition() {\n    if (this.targetAbsoluteTop + this.stepHeight + this.arrowSize + this.targetHeight > this.documentHeight) {\n      this.setStyleLeft();\n    }\n  }\n  autofixLeftPosition() {\n    if (this.targetAbsoluteLeft - this.stepWidth - this.arrowSize < 0) {\n      this.setStyleTop();\n    }\n  }\n  subscribeToResizeEvents() {\n    return this.eventListenerService.resizeEvent.subscribe(() => {\n      this.redrawStep();\n    });\n  }\n  redrawStep() {\n    this.updateStepDimensions();\n    this.drawStep();\n  }\n  getDimensionsByAspectRatio(width, height, aspectRatio) {\n    let calcHeight = (width + height) / (1 + aspectRatio);\n    let calcWidth = calcHeight * aspectRatio;\n    return {\n      width: calcWidth,\n      height: calcHeight\n    };\n  }\n  adjustDimensions(width, height) {\n    let area = width * height;\n    let newWidth = width;\n    let newHeight = height;\n    if (width > STEP_MAX_WIDTH) {\n      newWidth = STEP_MAX_WIDTH;\n      newHeight = area / newWidth;\n    } else if (width < STEP_MIN_WIDTH) {\n      newWidth = STEP_MIN_WIDTH;\n      newHeight = STEP_MIN_WIDTH / ASPECT_RATIO;\n    }\n    return {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n  updateStepDimensions() {\n    this.stepWidth = this.stepContainer.nativeElement.clientWidth;\n    this.stepHeight = this.stepContainer.nativeElement.clientHeight;\n  }\n  ngOnDestroy() {\n    this.subscriptions.forEach(subscription => {\n      subscription.unsubscribe();\n    });\n  }\n}\nJoyrideStepComponent.ɵfac = function JoyrideStepComponent_Factory(t) {\n  return new (t || JoyrideStepComponent)(i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(JoyrideStepsContainerService), i0.ɵɵdirectiveInject(EventListenerService), i0.ɵɵdirectiveInject(DocumentService), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(LoggerService), i0.ɵɵdirectiveInject(JoyrideOptionsService), i0.ɵɵdirectiveInject(TemplatesService));\n};\nJoyrideStepComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: JoyrideStepComponent,\n  selectors: [[\"joyride-step\"]],\n  viewQuery: function JoyrideStepComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c2, 7);\n      i0.ɵɵviewQuery(_c3, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.stepHolder = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.stepContainer = _t.first);\n    }\n  },\n  hostBindings: function JoyrideStepComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"keyup\", function JoyrideStepComponent_keyup_HostBindingHandler($event) {\n        return ctx.keyEvent($event);\n      }, false, i0.ɵɵresolveWindow);\n    }\n  },\n  inputs: {\n    step: \"step\"\n  },\n  decls: 21,\n  vars: 17,\n  consts: [[1, \"joyride-step__holder\", 3, \"id\"], [\"stepHolder\", \"\"], [\"class\", \"joyride-step__arrow\", 3, \"position\", \"top\", \"left\", 4, \"ngIf\"], [1, \"joyride-step__container\"], [\"stepContainer\", \"\"], [1, \"joyride-step__close\", 3, \"click\"], [1, \"joyride-step__header\"], [1, \"joyride-step__title\"], [1, \"joyride-step__body\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"defaultContent\", \"\"], [1, \"joyride-step__footer\"], [\"class\", \"joyride-step__counter-container\", 4, \"ngIf\"], [1, \"joyride-step__buttons-container\"], [\"class\", \"joyride-step__prev-container joyride-step__button\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"joyride-step__next-container joyride-step__button\", 3, \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"doneButton\", \"\"], [1, \"joyride-step__arrow\", 3, \"position\"], [1, \"joyride-step__counter-container\"], [\"defaultCounter\", \"\"], [1, \"joyride-step__counter\"], [1, \"joyride-step__prev-container\", \"joyride-step__button\", 3, \"click\"], [4, \"ngTemplateOutlet\"], [\"defaultPrevButton\", \"\"], [1, \"joyride-step__prev-button\", 3, \"color\"], [1, \"joyride-step__next-container\", \"joyride-step__button\", 3, \"click\"], [\"defaulNextButton\", \"\"], [3, \"color\"], [1, \"joyride-step__done-container\", \"joyride-step__button\", 3, \"click\"], [\"defaultDoneButton\", \"\"], [1, \"joyride-step__done-button\", 3, \"color\"]],\n  template: function JoyrideStepComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵtemplate(2, JoyrideStepComponent_joyride_arrow_2_Template, 1, 5, \"joyride-arrow\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3, 4)(5, \"joy-close-button\", 5);\n      i0.ɵɵlistener(\"click\", function JoyrideStepComponent_Template_joy_close_button_click_5_listener() {\n        return ctx.close();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 6)(7, \"div\", 7);\n      i0.ɵɵtext(8);\n      i0.ɵɵpipe(9, \"async\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"div\", 8);\n      i0.ɵɵtemplate(11, JoyrideStepComponent_ng_container_11_Template, 1, 0, \"ng-container\", 9);\n      i0.ɵɵtemplate(12, JoyrideStepComponent_ng_template_12_Template, 2, 3, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 11);\n      i0.ɵɵtemplate(15, JoyrideStepComponent_div_15_Template, 4, 2, \"div\", 12);\n      i0.ɵɵelementStart(16, \"div\", 13);\n      i0.ɵɵtemplate(17, JoyrideStepComponent_div_17_Template, 4, 1, \"div\", 14);\n      i0.ɵɵtemplate(18, JoyrideStepComponent_div_18_Template, 4, 1, \"div\", 15);\n      i0.ɵɵtemplate(19, JoyrideStepComponent_ng_template_19_Template, 4, 1, \"ng-template\", null, 16, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      const _r4 = i0.ɵɵreference(13);\n      const _r9 = i0.ɵɵreference(20);\n      i0.ɵɵstyleProp(\"top\", ctx.topPosition, \"px\")(\"left\", ctx.leftPosition, \"px\");\n      i0.ɵɵproperty(\"id\", \"joyride-step-\" + ctx.step.name);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showArrow);\n      i0.ɵɵadvance(5);\n      i0.ɵɵstyleProp(\"color\", ctx.themeColor);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 15, ctx.title));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngTemplateOutlet\", ctx.customContent ? ctx.customContent : _r4)(\"ngTemplateOutletContext\", ctx.ctx);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.isCounterVisible);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isPrevButtonVisible && !ctx.isFirstStep());\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLastStep())(\"ngIfElse\", _r9);\n    }\n  },\n  dependencies: [JoyrideArrowComponent, JoyrideCloseButtonComponent, JoyrideButtonComponent, i10.NgIf, i10.NgTemplateOutlet, i10.AsyncPipe],\n  styles: [\".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:flex;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:flex;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}\\n\"],\n  encapsulation: 2\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideStepComponent, [{\n    type: Component,\n    args: [{\n      selector: 'joyride-step',\n      encapsulation: ViewEncapsulation.None,\n      template: \"<div #stepHolder class=\\\"joyride-step__holder\\\" [id]=\\\"'joyride-step-' + step.name\\\" [style.top.px]=\\\"topPosition\\\" [style.left.px]=\\\"leftPosition\\\">\\n    <joyride-arrow *ngIf=\\\"showArrow\\\" class=\\\"joyride-step__arrow\\\" [position]=\\\"arrowPosition\\\" [style.top.px]=\\\"arrowTopPosition\\\"\\n        [style.left.px]=\\\"arrowLeftPosition\\\"></joyride-arrow>\\n    <div #stepContainer class=\\\"joyride-step__container\\\">\\n        <joy-close-button class=\\\"joyride-step__close\\\" (click)=\\\"close()\\\"></joy-close-button>\\n        <div class=\\\"joyride-step__header\\\">\\n            <div class=\\\"joyride-step__title\\\" [style.color]=\\\"themeColor\\\">{{ title | async }}</div>\\n        </div>\\n        <div class=\\\"joyride-step__body\\\">\\n            <ng-container *ngTemplateOutlet=\\\"customContent ? customContent : defaultContent; context: ctx\\\"></ng-container>\\n            <ng-template #defaultContent>\\n                {{ text | async }}\\n            </ng-template>\\n        </div>\\n        <div class=\\\"joyride-step__footer\\\">\\n            <div *ngIf=\\\"isCounterVisible\\\" class=\\\"joyride-step__counter-container\\\">\\n                <ng-container *ngTemplateOutlet=\\\"customCounter ? customCounter : defaultCounter; context: counterData\\\"></ng-container>\\n                <ng-template #defaultCounter>\\n                    <div class=\\\"joyride-step__counter\\\">{{ counter }}</div>\\n                </ng-template>\\n            </div>\\n            <div class=\\\"joyride-step__buttons-container\\\">\\n                <div class=\\\"joyride-step__prev-container joyride-step__button\\\" *ngIf=\\\"isPrevButtonVisible && !isFirstStep()\\\" (click)=\\\"prev()\\\">\\n                    <ng-container *ngTemplateOutlet=\\\"customPrevButton ? customPrevButton : defaultPrevButton\\\"></ng-container>\\n                    <ng-template #defaultPrevButton>\\n                        <joyride-button class=\\\"joyride-step__prev-button\\\" [color]=\\\"themeColor\\\">{{ prevText | async }}</joyride-button>\\n                    </ng-template>\\n                </div>\\n                <div class=\\\"joyride-step__next-container joyride-step__button\\\" *ngIf=\\\"!isLastStep(); else doneButton\\\" (click)=\\\"next()\\\">\\n                    <ng-container *ngTemplateOutlet=\\\"customNextButton ? customNextButton : defaulNextButton\\\"></ng-container>\\n                    <ng-template #defaulNextButton>\\n                        <joyride-button [color]=\\\"themeColor\\\">{{ nextText | async }}</joyride-button>\\n                    </ng-template>\\n                </div>\\n                <ng-template #doneButton>\\n                    <div class=\\\"joyride-step__done-container joyride-step__button\\\" (click)=\\\"close()\\\">\\n                        <ng-container *ngTemplateOutlet=\\\"customDoneButton ? customDoneButton : defaultDoneButton\\\"></ng-container>\\n                        <ng-template #defaultDoneButton>\\n                            <joyride-button class=\\\"joyride-step__done-button\\\" [color]=\\\"themeColor\\\">{{ doneText | async }}</joyride-button>\\n                        </ng-template>\\n                    </div>\\n                </ng-template>\\n            </div>\\n        </div>\\n    </div>\\n</div>\",\n      styles: [\".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:flex;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:flex;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.Injector\n    }, {\n      type: JoyrideStepsContainerService\n    }, {\n      type: EventListenerService\n    }, {\n      type: DocumentService\n    }, {\n      type: i0.Renderer2\n    }, {\n      type: LoggerService\n    }, {\n      type: JoyrideOptionsService\n    }, {\n      type: TemplatesService\n    }];\n  }, {\n    step: [{\n      type: Input\n    }],\n    stepHolder: [{\n      type: ViewChild,\n      args: ['stepHolder', {\n        static: true\n      }]\n    }],\n    stepContainer: [{\n      type: ViewChild,\n      args: ['stepContainer', {\n        static: true\n      }]\n    }],\n    keyEvent: [{\n      type: HostListener,\n      args: ['window:keyup', ['$event']]\n    }]\n  });\n})();\nclass StepDrawerService {\n  constructor(componentFactoryResolver, appRef, injector) {\n    this.componentFactoryResolver = componentFactoryResolver;\n    this.appRef = appRef;\n    this.injector = injector;\n    this.refMap = {};\n  }\n  draw(step) {\n    // 1. Create a component reference from the component\n    const ref = this.componentFactoryResolver.resolveComponentFactory(JoyrideStepComponent).create(this.injector);\n    // 2. Attach component to the appRef so that it's inside the ng component tree\n    this.appRef.attachView(ref.hostView);\n    // 3. Get DOM element from component\n    const domElem = ref.hostView.rootNodes[0];\n    // 4. Append DOM element to the body\n    document.body.appendChild(domElem);\n    const instance = ref.instance;\n    instance.step = step;\n    ref.changeDetectorRef.detectChanges();\n    step.stepInstance = instance;\n    this.refMap[step.name] = ref;\n  }\n  remove(step) {\n    this.appRef.detachView(this.refMap[step.name].hostView);\n    this.refMap[step.name].destroy();\n  }\n}\nStepDrawerService.ɵfac = function StepDrawerService_Factory(t) {\n  return new (t || StepDrawerService)(i0.ɵɵinject(i0.ComponentFactoryResolver), i0.ɵɵinject(i0.ApplicationRef), i0.ɵɵinject(i0.Injector));\n};\nStepDrawerService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: StepDrawerService,\n  factory: StepDrawerService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(StepDrawerService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i0.ComponentFactoryResolver\n    }, {\n      type: i0.ApplicationRef\n    }, {\n      type: i0.Injector\n    }];\n  }, null);\n})();\nconst SCROLLBAR_SIZE = 20;\nconst DISTANCE_FROM_TARGET = 15;\nconst ARROW_SIZE = 10;\nclass JoyrideStepService {\n  constructor(backDropService, eventListener, stepsContainerService, documentService, DOMService, stepDrawerService, optionsService, router, logger) {\n    this.backDropService = backDropService;\n    this.eventListener = eventListener;\n    this.stepsContainerService = stepsContainerService;\n    this.documentService = documentService;\n    this.DOMService = DOMService;\n    this.stepDrawerService = stepDrawerService;\n    this.optionsService = optionsService;\n    this.router = router;\n    this.logger = logger;\n    this.winTopPosition = 0;\n    this.winBottomPosition = 0;\n    this.stepsObserver = new ReplaySubject();\n    this.initViewportPositions();\n    this.subscribeToScrollEvents();\n    this.subscribeToResizeEvents();\n  }\n  initViewportPositions() {\n    this.winTopPosition = 0;\n    this.winBottomPosition = this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\n  }\n  subscribeToScrollEvents() {\n    this.eventListener.startListeningScrollEvents();\n    this.eventListener.scrollEvent.subscribe(scroll => {\n      this.winTopPosition = scroll.scrollY;\n      this.winBottomPosition = this.winTopPosition + this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\n      if (this.currentStep) this.backDropService.redraw(this.currentStep, scroll);\n    });\n  }\n  subscribeToResizeEvents() {\n    this.eventListener.resizeEvent.subscribe(() => {\n      if (this.currentStep) this.backDropService.redrawTarget(this.currentStep);\n    });\n  }\n  drawStep(step) {\n    step.position = step.position === NO_POSITION ? this.optionsService.getStepDefaultPosition() : step.position;\n    this.stepDrawerService.draw(step);\n  }\n  startTour() {\n    this.stepsObserver = new ReplaySubject();\n    this.stepsContainerService.init();\n    this.documentService.setDocumentHeight();\n    this.tryShowStep(StepActionType.NEXT);\n    this.eventListener.startListeningResizeEvents();\n    this.subscribeToStepsUpdates();\n    return this.stepsObserver.asObservable();\n  }\n  close() {\n    this.removeCurrentStep();\n    this.notifyTourIsFinished();\n    this.DOMService.getNativeWindow().scrollTo(0, 0);\n    this.eventListener.stopListeningResizeEvents();\n    this.backDropService.remove();\n  }\n  prev() {\n    this.removeCurrentStep();\n    this.currentStep.prevCliked.emit();\n    this.tryShowStep(StepActionType.PREV);\n  }\n  next() {\n    this.removeCurrentStep();\n    this.currentStep.nextClicked.emit();\n    this.tryShowStep(StepActionType.NEXT);\n  }\n  navigateToStepPage(action) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      let stepRoute = _this.stepsContainerService.getStepRoute(action);\n      if (stepRoute) {\n        return yield _this.router.navigate([stepRoute]);\n      }\n    })();\n  }\n  subscribeToStepsUpdates() {\n    this.stepsContainerService.stepHasBeenModified.subscribe(updatedStep => {\n      if (this.currentStep && this.currentStep.name === updatedStep.name) {\n        this.currentStep = updatedStep;\n      }\n    });\n  }\n  tryShowStep(actionType) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield _this2.navigateToStepPage(actionType);\n      const timeout = _this2.optionsService.getWaitingTime();\n      if (timeout > 100) _this2.backDropService.remove();\n      setTimeout(() => {\n        try {\n          _this2.showStep(actionType);\n        } catch (error) {\n          if (error instanceof JoyrideStepDoesNotExist) {\n            _this2.tryShowStep(actionType);\n          } else if (error instanceof JoyrideStepOutOfRange) {\n            _this2.logger.error('Forcing the tour closure: First or Last step not found in the DOM.');\n            _this2.close();\n          } else {\n            throw new Error(error);\n          }\n        }\n      }, timeout);\n    })();\n  }\n  showStep(actionType) {\n    this.currentStep = this.stepsContainerService.get(actionType);\n    if (this.currentStep == null) throw new JoyrideStepDoesNotExist('');\n    this.notifyStepClicked(actionType);\n    // Scroll the element to get it visible if it's in a scrollable element\n    this.scrollIfElementBeyondOtherElements();\n    this.backDropService.draw(this.currentStep);\n    this.drawStep(this.currentStep);\n    this.scrollIfStepAndTargetAreNotVisible();\n  }\n  notifyStepClicked(actionType) {\n    let stepInfo = {\n      number: this.stepsContainerService.getStepNumber(this.currentStep.name),\n      name: this.currentStep.name,\n      route: this.currentStep.route,\n      actionType\n    };\n    this.stepsObserver.next(stepInfo);\n  }\n  notifyTourIsFinished() {\n    if (this.currentStep) this.currentStep.tourDone.emit();\n    this.stepsObserver.complete();\n  }\n  removeCurrentStep() {\n    if (this.currentStep) this.stepDrawerService.remove(this.currentStep);\n  }\n  scrollIfStepAndTargetAreNotVisible() {\n    this.scrollWhenTargetOrStepAreHiddenBottom();\n    this.scrollWhenTargetOrStepAreHiddenTop();\n  }\n  scrollWhenTargetOrStepAreHiddenBottom() {\n    let totalTargetBottom = this.getMaxTargetAndStepBottomPosition();\n    if (totalTargetBottom > this.winBottomPosition) {\n      this.DOMService.getNativeWindow().scrollBy(0, totalTargetBottom - this.winBottomPosition);\n    }\n  }\n  scrollWhenTargetOrStepAreHiddenTop() {\n    let totalTargetTop = this.getMaxTargetAndStepTopPosition();\n    if (totalTargetTop < this.winTopPosition) {\n      this.DOMService.getNativeWindow().scrollBy(0, totalTargetTop - this.winTopPosition);\n    }\n  }\n  getMaxTargetAndStepBottomPosition() {\n    let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\n    if (this.currentStep.position === 'top') {\n      return targetAbsoluteTop + this.currentStep.stepInstance.targetHeight;\n    } else if (this.currentStep.position === 'bottom') {\n      return targetAbsoluteTop + this.currentStep.stepInstance.targetHeight + this.currentStep.stepInstance.stepHeight + ARROW_SIZE + DISTANCE_FROM_TARGET;\n    } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\n      return Math.max(targetAbsoluteTop + this.currentStep.stepInstance.targetHeight, targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 + this.currentStep.stepInstance.stepHeight / 2);\n    }\n  }\n  getMaxTargetAndStepTopPosition() {\n    let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\n    if (this.currentStep.position === 'top') {\n      return targetAbsoluteTop - (this.currentStep.stepInstance.stepHeight + ARROW_SIZE + DISTANCE_FROM_TARGET);\n    } else if (this.currentStep.position === 'bottom') {\n      return targetAbsoluteTop;\n    } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\n      return Math.min(targetAbsoluteTop, targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 - this.currentStep.stepInstance.stepHeight / 2);\n    }\n  }\n  scrollIfElementBeyondOtherElements() {\n    if (this.isElementBeyondOthers() === 2) {\n      this.documentService.scrollToTheTop(this.currentStep.targetViewContainer.element);\n    }\n    if (this.isElementBeyondOthers() === 2) {\n      this.documentService.scrollToTheBottom(this.currentStep.targetViewContainer.element);\n    }\n    if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\n      this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element, this.currentStep.isElementOrAncestorFixed);\n    }\n    if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\n      this.currentStep.targetViewContainer.element.nativeElement.scrollIntoView();\n    }\n  }\n  isElementBeyondOthers() {\n    return this.documentService.isElementBeyondOthers(this.currentStep.targetViewContainer.element, this.currentStep.isElementOrAncestorFixed, 'backdrop');\n  }\n}\nJoyrideStepService.ɵfac = function JoyrideStepService_Factory(t) {\n  return new (t || JoyrideStepService)(i0.ɵɵinject(JoyrideBackdropService), i0.ɵɵinject(EventListenerService), i0.ɵɵinject(JoyrideStepsContainerService), i0.ɵɵinject(DocumentService), i0.ɵɵinject(DomRefService), i0.ɵɵinject(StepDrawerService), i0.ɵɵinject(JoyrideOptionsService), i0.ɵɵinject(i3.Router), i0.ɵɵinject(LoggerService));\n};\nJoyrideStepService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: JoyrideStepService,\n  factory: JoyrideStepService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideStepService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: JoyrideBackdropService\n    }, {\n      type: EventListenerService\n    }, {\n      type: JoyrideStepsContainerService\n    }, {\n      type: DocumentService\n    }, {\n      type: DomRefService\n    }, {\n      type: StepDrawerService\n    }, {\n      type: JoyrideOptionsService\n    }, {\n      type: i3.Router\n    }, {\n      type: LoggerService\n    }];\n  }, null);\n})();\nclass JoyrideService {\n  constructor(platformId, stepService, optionsService) {\n    this.platformId = platformId;\n    this.stepService = stepService;\n    this.optionsService = optionsService;\n    this.tourInProgress = false;\n  }\n  startTour(options) {\n    if (!isPlatformBrowser(this.platformId)) {\n      return of(new JoyrideStepInfo());\n    }\n    if (!this.tourInProgress) {\n      this.tourInProgress = true;\n      if (options) {\n        this.optionsService.setOptions(options);\n      }\n      this.tour$ = this.stepService.startTour().pipe(finalize(() => this.tourInProgress = false));\n      this.tour$.subscribe();\n    }\n    return this.tour$;\n  }\n  closeTour() {\n    if (this.isTourInProgress()) this.stepService.close();\n  }\n  isTourInProgress() {\n    return this.tourInProgress;\n  }\n}\nJoyrideService.ɵfac = function JoyrideService_Factory(t) {\n  return new (t || JoyrideService)(i0.ɵɵinject(PLATFORM_ID), i0.ɵɵinject(JoyrideStepService), i0.ɵɵinject(JoyrideOptionsService));\n};\nJoyrideService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: JoyrideService,\n  factory: JoyrideService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }, {\n      type: JoyrideStepService\n    }, {\n      type: JoyrideOptionsService\n    }];\n  }, null);\n})();\nconst routerModuleForChild = RouterModule.forChild([]);\nclass JoyrideModule {\n  static forRoot() {\n    return {\n      ngModule: JoyrideModule,\n      providers: [JoyrideService, JoyrideStepService, JoyrideStepsContainerService, JoyrideBackdropService, EventListenerService, DocumentService, JoyrideOptionsService, StepDrawerService, DomRefService, LoggerService, TemplatesService]\n    };\n  }\n  static forChild() {\n    return {\n      ngModule: JoyrideModule,\n      providers: []\n    };\n  }\n}\nJoyrideModule.ɵfac = function JoyrideModule_Factory(t) {\n  return new (t || JoyrideModule)();\n};\nJoyrideModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: JoyrideModule\n});\nJoyrideModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[CommonModule, routerModuleForChild]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, routerModuleForChild],\n      declarations: [JoyrideDirective, JoyrideStepComponent, JoyrideArrowComponent, JoyrideButtonComponent, JoyrideCloseButtonComponent],\n      exports: [JoyrideDirective]\n    }]\n  }], null, null);\n})();\n\n/*\n * Public API Surface of ngx-joyride\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ARROW_SIZE, DEFAULT_DISTANCE_FROM_MARGIN_LEFT, DEFAULT_DISTANCE_FROM_MARGIN_TOP, DEFAULT_TEXTS, DEFAULT_THEME_COLOR, DEFAULT_TIMEOUT_BETWEEN_STEPS, DISTANCE_FROM_TARGET, DocumentService, DomRefService, EventListenerService, JoyrideArrowComponent, JoyrideBackdropService, JoyrideButtonComponent, JoyrideCloseButtonComponent, JoyrideDirective, JoyrideModule, JoyrideOptionsService, JoyrideService, JoyrideStepComponent, JoyrideStepService, JoyrideStepsContainerService, KEY_CODE, LoggerService, NO_POSITION, ObservableCustomTexts, STEP_DEFAULT_POSITION, Scroll, StepActionType, StepDrawerService, TemplatesService, routerModuleForChild };","map":{"version":3,"names":["i0","Injectable","PLATFORM_ID","Inject","EventEmitter","Directive","Input","Output","Component","ViewEncapsulation","ViewChild","HostListener","NgModule","i10","isPlatformBrowser","CommonModule","ReplaySubject","of","Observable","Subject","i3","RouterModule","finalize","JoyrideStep","constructor","title","text","JoyrideError","Error","message","Object","setPrototypeOf","prototype","JoyrideStepDoesNotExist","JoyrideStepOutOfRange","DEFAULT_THEME_COLOR","STEP_DEFAULT_POSITION","DEFAULT_TIMEOUT_BETWEEN_STEPS","ObservableCustomTexts","DEFAULT_TEXTS","prev","next","done","close","JoyrideOptionsService","themeColor","stepDefaultPosition","logsEnabled","showCounter","showPrevButton","stepsOrder","setOptions","options","steps","firstStep","startWith","waitingTime","customTexts","setCustomText","getBackdropColor","hexToRgb","getThemeColor","getStepDefaultPosition","getStepsOrder","getFirstStep","getWaitingTime","areLogsEnabled","isCounterVisible","isPrevButtonVisible","getCustomTexts","texts","toObservable","value","hex","shorthandRegex","replace","m","r","g","b","result","exec","parseInt","ɵfac","ɵprov","type","JOYRIDE","LoggerService","optionService","debug","data","console","info","warn","error","ROUTE_SEPARATOR","Step","StepActionType","JoyrideStepsContainerService","stepOptions","logger","tempSteps","currentStepIndex","stepHasBeenModified","getFirstStepIndex","stepIds","index","indexOf","undefined","init","forEach","stepId","push","id","step","addStep","stepToAdd","stepExist","filter","name","length","stepIndexToReplace","findIndex","get","action","NEXT","stepName","getStepName","stepFound","getStepRoute","stepID","stepRoute","includes","split","updatePosition","position","getStepIndex","getStepNumber","getStepsCount","map","DomRefService","platformId","fakeDocument","body","documentElement","fakeWindow","document","navigator","getNativeWindow","window","getNativeDocument","decorators","args","TemplatesService","setPrevButton","template","_prevButton","getPrevButton","setNextButton","_nextButton","getNextButton","setDoneButton","_doneButton","getDoneButton","setCounter","_counter","getCounter","NO_POSITION","JoyrideDirective","joyrideStepsContainer","viewContainerRef","domService","router","templateService","stepPosition","subscriptions","windowRef","ngAfterViewInit","prevTemplate","nextTemplate","doneTemplate","counterTemplate","targetViewContainer","setAsyncFields","stepContent","stepContentParams","nextClicked","prevCliked","tourDone","route","url","substr","transformCssStyle","getComputedStyle","element","nativeElement","transform","isElementOrAncestorFixed","isElementFixed","isAncestorsFixed","parentElement","ngOnChanges","changes","subscribe","nodeName","ngOnDestroy","sub","unsubscribe","ViewContainerRef","Router","ɵdir","selector","nextStep","JoyrideStepInfo","DocumentService","DOMService","setDocumentHeight","doc","elementsFromPoint","bind","getElementFixedTop","elementRef","getBoundingClientRect","top","getElementFixedLeft","left","getElementAbsoluteTop","scrollOffsets","getScrollOffsets","y","getElementAbsoluteLeft","x","documentHeight","calculateDocumentHeight","getDocumentHeight","isParentScrollable","getFirstScrollableParent","isElementBeyondOthers","keywordToDiscard","x1","y1","x2","width","y2","height","elements1","elements2","getFirstElementWithoutKeyword","scrollIntoView","firstScrollableParent","scrollTo","scrollTop","scrollToTheTop","scrollToTheBottom","scrollHeight","clientHeight","node","regex","style","prop","getPropertyValue","scroll","test","scrollparent","parentNode","documentRef","Math","max","offsetHeight","winReference","docReference","pageXOffset","pageYOffset","compatMode","scrollLeft","parents","parent","elem","elementFromPoint","pointerEvents","elements","keyword","classList","toString","shift","JoyrideBackdropService","documentService","optionsService","rendererFactory","lastXScroll","lastYScroll","setRenderer","renderer","createRenderer","draw","targetAbsoluteTop","getTargetTotalTop","targetAbsoluteLeft","getTargetTotalLeft","currentBackdropContainer","createElement","addClass","setStyle","setAttribute","backdropContent","appendChild","backdropTop","backdropMiddleContainer","backdropMiddleContent","leftBackdrop","targetBackdrop","offsetWidth","rightBackdrop","backdropBottom","removeLastBackdrop","drawCurrentBackdrop","lastBackdropContainer","remove","redrawTarget","handleVerticalScroll","handleHorizontalScroll","targetVC","redraw","scrollY","scrollX","newBackdropLeftWidth","handleTargetPartialWidth","visibleTargetWidth","newBackdropTopHeight","handleTargetPartialHeight","visibleTargetHeight","removeChild","RendererFactory2","Scroll","EventListenerService","scrollEvent","resizeEvent","startListeningScrollEvents","scrollUnlisten","listen","evt","startListeningResizeEvents","resizeUnlisten","stopListeningScrollEvents","stopListeningResizeEvents","JoyrideArrowComponent","ɵcmp","encapsulation","None","styles","JoyrideCloseButtonComponent","JoyrideButtonComponent","clicked","onClick","emit","NgStyle","color","STEP_MIN_WIDTH","STEP_MAX_WIDTH","CUSTOM_STEP_MAX_WIDTH_VW","STEP_HEIGHT","ASPECT_RATIO","DEFAULT_DISTANCE_FROM_MARGIN_TOP","DEFAULT_DISTANCE_FROM_MARGIN_LEFT","DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM","DEFAULT_DISTANCE_FROM_MARGIN_RIGHT","KEY_CODE","JoyrideStepComponent","injector","stepsContainerService","eventListenerService","stepWidth","stepHeight","showArrow","arrowSize","ARROW_SIZE","ngOnInit","joyrideStepService","JoyrideStepService","subscribeToResizeEvents","asObservable","setCustomTemplates","setCustomTexts","counter","val","checkRedraw","isCustomized","stepContainer","updateStepDimensions","dimensions","getDimensionsByAspectRatio","clientWidth","adjustDimensions","drawStep","setTimeout","redrawStep","customeTexts","prevText","nextText","doneText","stepHolder","targetWidth","targetHeight","setStepStyle","numberOfSteps","counterData","total","customContent","ctx","customPrevButton","customNextButton","customDoneButton","customCounter","keyEvent","event","log","keyCode","RIGHT_ARROW","isLastStep","LEFT_ARROW","ESCAPE_KEY","isFirstStep","setStyleTop","setStyleBottom","setStyleRight","setStyleLeft","setStyleCenter","topPosition","DISTANCE_FROM_TARGET","stepAbsoluteTop","arrowTopPosition","leftPosition","stepAbsoluteLeft","arrowLeftPosition","adjustLeftPosition","adjustRightPosition","arrowPosition","autofixTopPosition","adjustTopPosition","adjustBottomPosition","autofixRightPosition","autofixBottomPosition","autofixLeftPosition","currentWindowWidth","newLeftPos","deltaLeftPosition","newTopPos","deltaTopPosition","positionAlreadyFixed","aspectRatio","calcHeight","calcWidth","area","newWidth","newHeight","subscription","Injector","Renderer2","NgIf","NgTemplateOutlet","AsyncPipe","static","StepDrawerService","componentFactoryResolver","appRef","refMap","ref","resolveComponentFactory","create","attachView","hostView","domElem","rootNodes","instance","changeDetectorRef","detectChanges","stepInstance","detachView","destroy","ComponentFactoryResolver","ApplicationRef","SCROLLBAR_SIZE","backDropService","eventListener","stepDrawerService","winTopPosition","winBottomPosition","stepsObserver","initViewportPositions","subscribeToScrollEvents","innerHeight","currentStep","startTour","tryShowStep","subscribeToStepsUpdates","removeCurrentStep","notifyTourIsFinished","PREV","navigateToStepPage","navigate","updatedStep","actionType","timeout","showStep","notifyStepClicked","scrollIfElementBeyondOtherElements","scrollIfStepAndTargetAreNotVisible","stepInfo","number","complete","scrollWhenTargetOrStepAreHiddenBottom","scrollWhenTargetOrStepAreHiddenTop","totalTargetBottom","getMaxTargetAndStepBottomPosition","scrollBy","totalTargetTop","getMaxTargetAndStepTopPosition","min","JoyrideService","stepService","tourInProgress","tour$","pipe","closeTour","isTourInProgress","routerModuleForChild","forChild","JoyrideModule","forRoot","ngModule","providers","ɵmod","ɵinj","imports","declarations","exports"],"sources":["F:/Plantillas/template/node_modules/ngx-joyride/fesm2020/ngx-joyride.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, PLATFORM_ID, Inject, EventEmitter, Directive, Input, Output, Component, ViewEncapsulation, ViewChild, HostListener, NgModule } from '@angular/core';\nimport * as i10 from '@angular/common';\nimport { isPlatformBrowser, CommonModule } from '@angular/common';\nimport { ReplaySubject, of, Observable, Subject } from 'rxjs';\nimport * as i3 from '@angular/router';\nimport { RouterModule } from '@angular/router';\nimport { finalize } from 'rxjs/operators';\n\nclass JoyrideStep {\n    constructor() {\n        this.title = new ReplaySubject();\n        this.text = new ReplaySubject();\n    }\n}\n\nclass JoyrideError extends Error {\n    constructor(message) {\n        super(message);\n        Object.setPrototypeOf(this, JoyrideError.prototype);\n    }\n}\nclass JoyrideStepDoesNotExist extends Error {\n    constructor(message) {\n        super(message);\n        Object.setPrototypeOf(this, JoyrideStepDoesNotExist.prototype);\n    }\n}\nclass JoyrideStepOutOfRange extends Error {\n    constructor(message) {\n        super(message);\n        Object.setPrototypeOf(this, JoyrideStepOutOfRange.prototype);\n    }\n}\n\nconst DEFAULT_THEME_COLOR = '#3b5560';\nconst STEP_DEFAULT_POSITION = 'bottom';\nconst DEFAULT_TIMEOUT_BETWEEN_STEPS = 1;\nclass ObservableCustomTexts {\n}\nconst DEFAULT_TEXTS = {\n    prev: of('prev'),\n    next: of('next'),\n    done: of('done'),\n    close: of(null)\n};\nclass JoyrideOptionsService {\n    constructor() {\n        this.themeColor = DEFAULT_THEME_COLOR;\n        this.stepDefaultPosition = STEP_DEFAULT_POSITION;\n        this.logsEnabled = false;\n        this.showCounter = true;\n        this.showPrevButton = true;\n        this.stepsOrder = [];\n    }\n    setOptions(options) {\n        this.stepsOrder = options.steps;\n        this.stepDefaultPosition = options.stepDefaultPosition\n            ? options.stepDefaultPosition\n            : this.stepDefaultPosition;\n        this.logsEnabled =\n            typeof options.logsEnabled !== 'undefined'\n                ? options.logsEnabled\n                : this.logsEnabled;\n        this.showCounter =\n            typeof options.showCounter !== 'undefined'\n                ? options.showCounter\n                : this.showCounter;\n        this.showPrevButton =\n            typeof options.showPrevButton !== 'undefined'\n                ? options.showPrevButton\n                : this.showPrevButton;\n        this.themeColor = options.themeColor\n            ? options.themeColor\n            : this.themeColor;\n        this.firstStep = options.startWith;\n        this.waitingTime =\n            typeof options.waitingTime !== 'undefined'\n                ? options.waitingTime\n                : DEFAULT_TIMEOUT_BETWEEN_STEPS;\n        typeof options.customTexts !== 'undefined'\n            ? this.setCustomText(options.customTexts)\n            : this.setCustomText(DEFAULT_TEXTS);\n    }\n    getBackdropColor() {\n        return this.hexToRgb(this.themeColor);\n    }\n    getThemeColor() {\n        return this.themeColor;\n    }\n    getStepDefaultPosition() {\n        return this.stepDefaultPosition;\n    }\n    getStepsOrder() {\n        return this.stepsOrder;\n    }\n    getFirstStep() {\n        return this.firstStep;\n    }\n    getWaitingTime() {\n        return this.waitingTime;\n    }\n    areLogsEnabled() {\n        return this.logsEnabled;\n    }\n    isCounterVisible() {\n        return this.showCounter;\n    }\n    isPrevButtonVisible() {\n        return this.showPrevButton;\n    }\n    getCustomTexts() {\n        return this.customTexts;\n    }\n    setCustomText(texts) {\n        let prev;\n        let next;\n        let done;\n        let close;\n        prev = texts.prev ? texts.prev : DEFAULT_TEXTS.prev;\n        next = texts.next ? texts.next : DEFAULT_TEXTS.next;\n        done = texts.done ? texts.done : DEFAULT_TEXTS.done;\n        close = texts.close ? texts.close : DEFAULT_TEXTS.close;\n        this.customTexts = {\n            prev: this.toObservable(prev),\n            next: this.toObservable(next),\n            done: this.toObservable(done),\n            close: this.toObservable(close)\n        };\n    }\n    toObservable(value) {\n        return value instanceof Observable ? value : of(value);\n    }\n    hexToRgb(hex) {\n        const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n        hex = hex.replace(shorthandRegex, (m, r, g, b) => {\n            return r + r + g + g + b + b;\n        });\n        const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        return result\n            ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}`\n            : null;\n    }\n}\nJoyrideOptionsService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideOptionsService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nJoyrideOptionsService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideOptionsService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideOptionsService, decorators: [{\n            type: Injectable\n        }] });\n\nconst JOYRIDE = 'ngx-joyride:::';\nclass LoggerService {\n    constructor(optionService) {\n        this.optionService = optionService;\n    }\n    debug(message, data = \"\") {\n        if (this.optionService.areLogsEnabled()) {\n            console.debug(JOYRIDE + message, data);\n        }\n    }\n    info(message, data = \"\") {\n        if (this.optionService.areLogsEnabled()) {\n            console.info(JOYRIDE + message, data);\n        }\n    }\n    warn(message, data = \"\") {\n        if (this.optionService.areLogsEnabled()) {\n            console.warn(JOYRIDE + message, data);\n        }\n    }\n    error(message, data = \"\") {\n        if (this.optionService.areLogsEnabled()) {\n            console.error(JOYRIDE + message, data);\n        }\n    }\n}\nLoggerService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: LoggerService, deps: [{ token: JoyrideOptionsService }], target: i0.ɵɵFactoryTarget.Injectable });\nLoggerService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: LoggerService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: LoggerService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: JoyrideOptionsService }]; } });\n\nconst ROUTE_SEPARATOR = '@';\nclass Step {\n}\nvar StepActionType;\n(function (StepActionType) {\n    StepActionType[\"NEXT\"] = \"NEXT\";\n    StepActionType[\"PREV\"] = \"PREV\";\n})(StepActionType || (StepActionType = {}));\nclass JoyrideStepsContainerService {\n    constructor(stepOptions, logger) {\n        this.stepOptions = stepOptions;\n        this.logger = logger;\n        this.tempSteps = [];\n        this.currentStepIndex = -2;\n        this.stepHasBeenModified = new Subject();\n    }\n    getFirstStepIndex() {\n        const firstStep = this.stepOptions.getFirstStep();\n        const stepIds = this.stepOptions.getStepsOrder();\n        let index = stepIds.indexOf(firstStep);\n        if (index < 0) {\n            index = 0;\n            if (firstStep !== undefined)\n                this.logger.warn(`The step ${firstStep} does not exist. Check in your step list if it's present.`);\n        }\n        return index;\n    }\n    init() {\n        this.logger.info('Initializing the steps array.');\n        this.steps = [];\n        this.currentStepIndex = this.getFirstStepIndex() - 1;\n        let stepIds = this.stepOptions.getStepsOrder();\n        stepIds.forEach(stepId => this.steps.push({ id: stepId, step: null }));\n    }\n    addStep(stepToAdd) {\n        let stepExist = this.tempSteps.filter(step => step.name === stepToAdd.name).length > 0;\n        if (!stepExist) {\n            this.logger.info(`Adding step ${stepToAdd.name} to the steps list.`);\n            this.tempSteps.push(stepToAdd);\n        }\n        else {\n            let stepIndexToReplace = this.tempSteps.findIndex(step => step.name === stepToAdd.name);\n            this.tempSteps[stepIndexToReplace] = stepToAdd;\n        }\n    }\n    get(action) {\n        if (action === StepActionType.NEXT)\n            this.currentStepIndex++;\n        else\n            this.currentStepIndex--;\n        if (this.currentStepIndex < 0 || this.currentStepIndex >= this.steps.length)\n            throw new JoyrideStepOutOfRange('The first or last step of the tour cannot be found!');\n        const stepName = this.getStepName(this.steps[this.currentStepIndex].id);\n        const index = this.tempSteps.findIndex(step => step.name === stepName);\n        let stepFound = this.tempSteps[index];\n        this.steps[this.currentStepIndex].step = stepFound;\n        if (stepFound == null) {\n            this.logger.warn(`Step ${this.steps[this.currentStepIndex].id} not found in the DOM. Check if it's hidden by *ngIf directive.`);\n        }\n        return stepFound;\n    }\n    getStepRoute(action) {\n        let stepID;\n        if (action === StepActionType.NEXT) {\n            stepID = this.steps[this.currentStepIndex + 1] ? this.steps[this.currentStepIndex + 1].id : null;\n        }\n        else {\n            stepID = this.steps[this.currentStepIndex - 1] ? this.steps[this.currentStepIndex - 1].id : null;\n        }\n        let stepRoute = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[1] : '';\n        return stepRoute;\n    }\n    updatePosition(stepName, position) {\n        let index = this.getStepIndex(stepName);\n        if (this.steps[index].step) {\n            this.steps[index].step.position = position;\n            this.stepHasBeenModified.next(this.steps[index].step);\n        }\n        else {\n            this.logger.warn(`Trying to modify the position of ${stepName} to ${position}. Step not found!Is this step located in a different route?`);\n        }\n    }\n    getStepNumber(stepName) {\n        return this.getStepIndex(stepName) + 1;\n    }\n    getStepsCount() {\n        let stepsOrder = this.stepOptions.getStepsOrder();\n        return stepsOrder.length;\n    }\n    getStepIndex(stepName) {\n        const index = this.steps\n            .map(step => (step.id.includes(ROUTE_SEPARATOR) ? step.id.split(ROUTE_SEPARATOR)[0] : step.id))\n            .findIndex(name => stepName === name);\n        if (index === -1)\n            throw new JoyrideError(`The step with name: ${stepName} does not exist in the step list.`);\n        return index;\n    }\n    getStepName(stepID) {\n        let stepName = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[0] : stepID;\n        return stepName;\n    }\n}\nJoyrideStepsContainerService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepsContainerService, deps: [{ token: JoyrideOptionsService }, { token: LoggerService }], target: i0.ɵɵFactoryTarget.Injectable });\nJoyrideStepsContainerService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepsContainerService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepsContainerService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: JoyrideOptionsService }, { type: LoggerService }]; } });\n\nclass DomRefService {\n    constructor(platformId) {\n        this.platformId = platformId;\n        this.fakeDocument = { body: {}, documentElement: {} };\n        this.fakeWindow = { document: this.fakeDocument, navigator: {} };\n    }\n    getNativeWindow() {\n        if (isPlatformBrowser(this.platformId))\n            return window;\n        else\n            return this.fakeWindow;\n    }\n    getNativeDocument() {\n        if (isPlatformBrowser(this.platformId))\n            return document;\n        else\n            return this.fakeDocument;\n    }\n}\nDomRefService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: DomRefService, deps: [{ token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Injectable });\nDomRefService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: DomRefService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: DomRefService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }]; } });\n\nclass TemplatesService {\n    setPrevButton(template) {\n        this._prevButton = template;\n    }\n    getPrevButton() {\n        return this._prevButton;\n    }\n    setNextButton(template) {\n        this._nextButton = template;\n    }\n    getNextButton() {\n        return this._nextButton;\n    }\n    setDoneButton(template) {\n        this._doneButton = template;\n    }\n    getDoneButton() {\n        return this._doneButton;\n    }\n    setCounter(template) {\n        this._counter = template;\n    }\n    getCounter() {\n        return this._counter;\n    }\n}\nTemplatesService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: TemplatesService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nTemplatesService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: TemplatesService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: TemplatesService, decorators: [{\n            type: Injectable\n        }] });\n\nconst NO_POSITION = 'NO_POSITION';\nclass JoyrideDirective {\n    constructor(joyrideStepsContainer, viewContainerRef, domService, router, templateService, platformId) {\n        this.joyrideStepsContainer = joyrideStepsContainer;\n        this.viewContainerRef = viewContainerRef;\n        this.domService = domService;\n        this.router = router;\n        this.templateService = templateService;\n        this.platformId = platformId;\n        this.stepPosition = NO_POSITION;\n        this.prev = new EventEmitter();\n        this.next = new EventEmitter();\n        this.done = new EventEmitter();\n        this.subscriptions = [];\n        this.windowRef = this.domService.getNativeWindow();\n        this.step = new JoyrideStep();\n    }\n    ngAfterViewInit() {\n        if (!isPlatformBrowser(this.platformId))\n            return;\n        if (this.prevTemplate)\n            this.templateService.setPrevButton(this.prevTemplate);\n        if (this.nextTemplate)\n            this.templateService.setNextButton(this.nextTemplate);\n        if (this.doneTemplate)\n            this.templateService.setDoneButton(this.doneTemplate);\n        if (this.counterTemplate)\n            this.templateService.setCounter(this.counterTemplate);\n        this.step.position = this.stepPosition;\n        this.step.targetViewContainer = this.viewContainerRef;\n        this.setAsyncFields(this.step);\n        this.step.stepContent = this.stepContent;\n        this.step.stepContentParams = this.stepContentParams;\n        this.step.nextClicked = this.next;\n        this.step.prevCliked = this.prev;\n        this.step.tourDone = this.done;\n        if (!this.name)\n            throw new JoyrideError(\"All the steps should have the 'joyrideStep' property set with a custom name.\");\n        this.step.name = this.name;\n        this.step.route = this.router.url.substr(0, 1) === '/' ? this.router.url.substr(1) : this.router.url;\n        this.step.transformCssStyle = this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform;\n        this.step.isElementOrAncestorFixed =\n            this.isElementFixed(this.viewContainerRef.element) ||\n                this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement);\n        this.joyrideStepsContainer.addStep(this.step);\n    }\n    ngOnChanges(changes) {\n        if (changes['title'] || changes['text']) {\n            this.setAsyncFields(this.step);\n        }\n    }\n    isElementFixed(element) {\n        return this.windowRef.getComputedStyle(element.nativeElement).position === 'fixed';\n    }\n    setAsyncFields(step) {\n        if (this.title instanceof Observable) {\n            this.subscriptions.push(this.title.subscribe(title => {\n                step.title.next(title);\n            }));\n        }\n        else {\n            step.title.next(this.title);\n        }\n        if (this.text instanceof Observable) {\n            this.subscriptions.push(this.text.subscribe(text => {\n                step.text.next(text);\n            }));\n        }\n        else {\n            step.text.next(this.text);\n        }\n    }\n    isAncestorsFixed(nativeElement) {\n        if (!nativeElement || !nativeElement.parentElement)\n            return false;\n        let isElementFixed = this.windowRef.getComputedStyle(nativeElement.parentElement).position === 'fixed';\n        if (nativeElement.nodeName === 'BODY') {\n            return isElementFixed;\n        }\n        if (isElementFixed)\n            return true;\n        else\n            return this.isAncestorsFixed(nativeElement.parentElement);\n    }\n    ngOnDestroy() {\n        this.subscriptions.forEach(sub => {\n            sub.unsubscribe();\n        });\n    }\n}\nJoyrideDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideDirective, deps: [{ token: JoyrideStepsContainerService }, { token: i0.ViewContainerRef }, { token: DomRefService }, { token: i3.Router }, { token: TemplatesService }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Directive });\nJoyrideDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.1.1\", type: JoyrideDirective, selector: \"joyrideStep, [joyrideStep]\", inputs: { name: [\"joyrideStep\", \"name\"], nextStep: \"nextStep\", title: \"title\", text: \"text\", stepPosition: \"stepPosition\", stepContent: \"stepContent\", stepContentParams: \"stepContentParams\", prevTemplate: \"prevTemplate\", nextTemplate: \"nextTemplate\", doneTemplate: \"doneTemplate\", counterTemplate: \"counterTemplate\" }, outputs: { prev: \"prev\", next: \"next\", done: \"done\" }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'joyrideStep, [joyrideStep]'\n                }]\n        }], ctorParameters: function () { return [{ type: JoyrideStepsContainerService }, { type: i0.ViewContainerRef }, { type: DomRefService }, { type: i3.Router }, { type: TemplatesService }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }]; }, propDecorators: { name: [{\n                type: Input,\n                args: ['joyrideStep']\n            }], nextStep: [{\n                type: Input\n            }], title: [{\n                type: Input\n            }], text: [{\n                type: Input\n            }], stepPosition: [{\n                type: Input\n            }], stepContent: [{\n                type: Input\n            }], stepContentParams: [{\n                type: Input\n            }], prevTemplate: [{\n                type: Input\n            }], nextTemplate: [{\n                type: Input\n            }], doneTemplate: [{\n                type: Input\n            }], counterTemplate: [{\n                type: Input\n            }], prev: [{\n                type: Output\n            }], next: [{\n                type: Output\n            }], done: [{\n                type: Output\n            }] } });\n\nclass JoyrideStepInfo {\n}\n\nclass DocumentService {\n    constructor(DOMService, platformId) {\n        this.DOMService = DOMService;\n        if (!isPlatformBrowser(platformId)) {\n            return;\n        }\n        this.setDocumentHeight();\n        var doc = DOMService.getNativeDocument();\n        if (doc && !doc.elementsFromPoint) {\n            // IE 11 - Edge browsers\n            doc.elementsFromPoint = this.elementsFromPoint.bind(this);\n        }\n    }\n    getElementFixedTop(elementRef) {\n        return elementRef.nativeElement.getBoundingClientRect().top;\n    }\n    getElementFixedLeft(elementRef) {\n        return elementRef.nativeElement.getBoundingClientRect().left;\n    }\n    getElementAbsoluteTop(elementRef) {\n        const scrollOffsets = this.getScrollOffsets();\n        return (elementRef.nativeElement.getBoundingClientRect().top +\n            scrollOffsets.y);\n    }\n    getElementAbsoluteLeft(elementRef) {\n        const scrollOffsets = this.getScrollOffsets();\n        return (elementRef.nativeElement.getBoundingClientRect().left +\n            scrollOffsets.x);\n    }\n    setDocumentHeight() {\n        this.documentHeight = this.calculateDocumentHeight();\n    }\n    getDocumentHeight() {\n        return this.documentHeight;\n    }\n    isParentScrollable(elementRef) {\n        return (this.getFirstScrollableParent(elementRef.nativeElement) !==\n            this.DOMService.getNativeDocument().body);\n    }\n    isElementBeyondOthers(elementRef, isElementFixed, keywordToDiscard) {\n        const x1 = isElementFixed\n            ? this.getElementFixedLeft(elementRef)\n            : this.getElementAbsoluteLeft(elementRef);\n        const y1 = isElementFixed\n            ? this.getElementFixedTop(elementRef)\n            : this.getElementAbsoluteTop(elementRef);\n        const x2 = x1 + elementRef.nativeElement.getBoundingClientRect().width - 1;\n        const y2 = y1 + elementRef.nativeElement.getBoundingClientRect().height - 1;\n        const elements1 = this.DOMService.getNativeDocument().elementsFromPoint(x1, y1);\n        const elements2 = this.DOMService.getNativeDocument().elementsFromPoint(x2, y2);\n        if (elements1.length === 0 && elements2.length === 0)\n            return 1;\n        if (this.getFirstElementWithoutKeyword(elements1, keywordToDiscard) !==\n            elementRef.nativeElement ||\n            this.getFirstElementWithoutKeyword(elements2, keywordToDiscard) !==\n                elementRef.nativeElement) {\n            return 2;\n        }\n        return 3;\n    }\n    scrollIntoView(elementRef, isElementFixed) {\n        const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\n        const top = isElementFixed\n            ? this.getElementFixedTop(elementRef)\n            : this.getElementAbsoluteTop(elementRef);\n        if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\n            if (firstScrollableParent.scrollTo) {\n                firstScrollableParent.scrollTo(0, top - 150);\n            }\n            else {\n                // IE 11 - Edge browsers\n                firstScrollableParent.scrollTop = top - 150;\n            }\n        }\n        else {\n            this.DOMService.getNativeWindow().scrollTo(0, top - 150);\n        }\n    }\n    scrollToTheTop(elementRef) {\n        const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\n        if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\n            if (firstScrollableParent.scrollTo) {\n                firstScrollableParent.scrollTo(0, 0);\n            }\n            else {\n                // IE 11 - Edge browsers\n                firstScrollableParent.scrollTop = 0;\n            }\n        }\n        else {\n            this.DOMService.getNativeWindow().scrollTo(0, 0);\n        }\n    }\n    scrollToTheBottom(elementRef) {\n        const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\n        if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\n            if (firstScrollableParent.scrollTo) {\n                firstScrollableParent.scrollTo(0, this.DOMService.getNativeDocument().body.scrollHeight);\n            }\n            else {\n                // IE 11 - Edge browsers\n                firstScrollableParent.scrollTop =\n                    firstScrollableParent.scrollHeight -\n                        firstScrollableParent.clientHeight;\n            }\n        }\n        else {\n            this.DOMService.getNativeWindow().scrollTo(0, this.DOMService.getNativeDocument().body.scrollHeight);\n        }\n    }\n    getFirstScrollableParent(node) {\n        const regex = /(auto|scroll|overlay)/;\n        const style = (node, prop) => this.DOMService.getNativeWindow()\n            .getComputedStyle(node, null)\n            .getPropertyValue(prop);\n        const scroll = (node) => regex.test(style(node, 'overflow') +\n            style(node, 'overflow-y') +\n            style(node, 'overflow-x'));\n        const scrollparent = (node) => {\n            return !node || node === this.DOMService.getNativeDocument().body\n                ? this.DOMService.getNativeDocument().body\n                : scroll(node)\n                    ? node\n                    : scrollparent(node.parentNode);\n        };\n        return scrollparent(node);\n    }\n    calculateDocumentHeight() {\n        const documentRef = this.DOMService.getNativeDocument();\n        return Math.max(documentRef.body.scrollHeight, documentRef.documentElement.scrollHeight, documentRef.body.offsetHeight, documentRef.documentElement.offsetHeight, documentRef.body.clientHeight, documentRef.documentElement.clientHeight);\n    }\n    getScrollOffsets() {\n        const winReference = this.DOMService.getNativeWindow();\n        const docReference = this.DOMService.getNativeDocument();\n        // This works for all browsers except IE versions 8 and before\n        if (winReference.pageXOffset != null)\n            return { x: winReference.pageXOffset, y: winReference.pageYOffset };\n        // For IE (or any browser) in Standards mode\n        if (docReference.compatMode == 'CSS1Compat')\n            return {\n                x: docReference.documentElement.scrollLeft,\n                y: docReference.documentElement.scrollTop\n            };\n        // For browsers in Quirks mode\n        return {\n            x: docReference.body.scrollLeft,\n            y: docReference.body.scrollTop\n        };\n    }\n    elementsFromPoint(x, y) {\n        var parents = [];\n        var parent = void 0;\n        do {\n            const elem = this.DOMService.getNativeDocument().elementFromPoint(x, y);\n            if (elem && parent !== elem) {\n                parent = elem;\n                parents.push(parent);\n                parent.style.pointerEvents = 'none';\n            }\n            else {\n                parent = false;\n            }\n        } while (parent);\n        parents.forEach(function (parent) {\n            return (parent.style.pointerEvents = 'all');\n        });\n        return parents;\n    }\n    getFirstElementWithoutKeyword(elements, keyword) {\n        while (elements[0] &&\n            elements[0].classList.toString().includes(keyword)) {\n            elements.shift();\n        }\n        return elements[0];\n    }\n}\nDocumentService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: DocumentService, deps: [{ token: DomRefService }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Injectable });\nDocumentService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: DocumentService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: DocumentService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: DomRefService }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }]; } });\n\nclass JoyrideBackdropService {\n    constructor(documentService, optionsService, rendererFactory) {\n        this.documentService = documentService;\n        this.optionsService = optionsService;\n        this.rendererFactory = rendererFactory;\n        this.lastXScroll = 0;\n        this.lastYScroll = 0;\n        this.setRenderer();\n    }\n    setRenderer() {\n        this.renderer = this.rendererFactory.createRenderer(null, null);\n    }\n    draw(step) {\n        this.elementRef = step.targetViewContainer;\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\n        this.currentBackdropContainer = this.renderer.createElement('div');\n        this.renderer.addClass(this.currentBackdropContainer, 'backdrop-container');\n        this.renderer.setStyle(this.currentBackdropContainer, 'position', 'fixed');\n        this.renderer.setStyle(this.currentBackdropContainer, 'top', '0px');\n        this.renderer.setStyle(this.currentBackdropContainer, 'left', '0px');\n        this.renderer.setStyle(this.currentBackdropContainer, 'width', '100%');\n        this.renderer.setStyle(this.currentBackdropContainer, 'height', '100%');\n        this.renderer.setStyle(this.currentBackdropContainer, 'z-index', '1000');\n        this.renderer.setAttribute(this.currentBackdropContainer, 'id', 'backdrop-' + step.name);\n        this.backdropContent = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropContent, 'backdrop-content');\n        this.renderer.setStyle(this.backdropContent, 'position', 'relative');\n        this.renderer.setStyle(this.backdropContent, 'height', '100%');\n        this.renderer.setStyle(this.backdropContent, 'display', 'flex');\n        this.renderer.setStyle(this.backdropContent, 'flex-direction', 'column');\n        this.renderer.appendChild(this.currentBackdropContainer, this.backdropContent);\n        this.backdropTop = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropTop, 'joyride-backdrop');\n        this.renderer.addClass(this.backdropTop, 'backdrop-top');\n        this.renderer.setStyle(this.backdropTop, 'width', '100%');\n        this.renderer.setStyle(this.backdropTop, 'height', this.targetAbsoluteTop - this.lastYScroll + 'px');\n        this.renderer.setStyle(this.backdropTop, 'flex-shrink', '0');\n        this.renderer.setStyle(this.backdropTop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n        this.renderer.appendChild(this.backdropContent, this.backdropTop);\n        this.backdropMiddleContainer = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropMiddleContainer, 'backdrop-middle-container');\n        this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\n        this.renderer.setStyle(this.backdropMiddleContainer, 'width', '100%');\n        this.renderer.setStyle(this.backdropMiddleContainer, 'flex-shrink', '0');\n        this.renderer.appendChild(this.backdropContent, this.backdropMiddleContainer);\n        this.backdropMiddleContent = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropMiddleContent, 'backdrop-middle-content');\n        this.renderer.setStyle(this.backdropMiddleContent, 'display', 'flex');\n        this.renderer.setStyle(this.backdropMiddleContent, 'width', '100%');\n        this.renderer.setStyle(this.backdropMiddleContent, 'height', '100%');\n        this.renderer.appendChild(this.backdropMiddleContainer, this.backdropMiddleContent);\n        this.leftBackdrop = this.renderer.createElement('div');\n        this.renderer.addClass(this.leftBackdrop, 'joyride-backdrop');\n        this.renderer.addClass(this.leftBackdrop, 'backdrop-left');\n        this.renderer.setStyle(this.leftBackdrop, 'flex-shrink', '0');\n        this.renderer.setStyle(this.leftBackdrop, 'width', this.targetAbsoluteLeft - this.lastXScroll + 'px');\n        this.renderer.setStyle(this.leftBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n        this.renderer.appendChild(this.backdropMiddleContent, this.leftBackdrop);\n        this.targetBackdrop = this.renderer.createElement('div');\n        this.renderer.addClass(this.targetBackdrop, 'backdrop-target');\n        this.renderer.setStyle(this.targetBackdrop, 'flex-shrink', '0');\n        this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\n        this.renderer.appendChild(this.backdropMiddleContent, this.targetBackdrop);\n        this.rightBackdrop = this.renderer.createElement('div');\n        this.renderer.addClass(this.rightBackdrop, 'joyride-backdrop');\n        this.renderer.addClass(this.rightBackdrop, 'backdrop-right');\n        this.renderer.setStyle(this.rightBackdrop, 'width', '100%');\n        this.renderer.setStyle(this.rightBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n        this.renderer.appendChild(this.backdropMiddleContent, this.rightBackdrop);\n        this.backdropBottom = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropBottom, 'joyride-backdrop');\n        this.renderer.addClass(this.backdropBottom, 'backdrop-bottom');\n        this.renderer.setStyle(this.backdropBottom, 'width', '100%');\n        this.renderer.setStyle(this.backdropBottom, 'height', '100%');\n        this.renderer.setStyle(this.backdropBottom, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n        this.renderer.appendChild(this.backdropContent, this.backdropBottom);\n        this.removeLastBackdrop();\n        this.drawCurrentBackdrop();\n        this.lastBackdropContainer = this.currentBackdropContainer;\n    }\n    remove() {\n        this.removeLastBackdrop();\n    }\n    redrawTarget(step) {\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\n        this.handleVerticalScroll(step);\n        this.handleHorizontalScroll(step);\n    }\n    getTargetTotalTop(step) {\n        let targetVC = step.targetViewContainer;\n        return step.isElementOrAncestorFixed\n            ? this.documentService.getElementFixedTop(targetVC.element)\n            : this.documentService.getElementAbsoluteTop(targetVC.element);\n    }\n    getTargetTotalLeft(step) {\n        let targetVC = step.targetViewContainer;\n        return step.isElementOrAncestorFixed\n            ? this.documentService.getElementFixedLeft(targetVC.element)\n            : this.documentService.getElementAbsoluteLeft(targetVC.element);\n    }\n    redraw(step, scroll) {\n        if (this.lastYScroll !== scroll.scrollY) {\n            this.lastYScroll = scroll.scrollY;\n            if (this.elementRef) {\n                this.handleVerticalScroll(step);\n            }\n        }\n        if (this.lastXScroll !== scroll.scrollX) {\n            this.lastXScroll = scroll.scrollX;\n            if (this.elementRef) {\n                this.handleHorizontalScroll(step);\n            }\n        }\n    }\n    handleHorizontalScroll(step) {\n        let newBackdropLeftWidth = step.isElementOrAncestorFixed ? this.targetAbsoluteLeft : this.targetAbsoluteLeft - this.lastXScroll;\n        if (newBackdropLeftWidth >= 0) {\n            this.renderer.setStyle(this.leftBackdrop, 'width', newBackdropLeftWidth + 'px');\n            this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\n        }\n        else {\n            this.handleTargetPartialWidth(newBackdropLeftWidth);\n        }\n    }\n    handleTargetPartialWidth(newBackdropLeftWidth) {\n        this.renderer.setStyle(this.leftBackdrop, 'width', 0 + 'px');\n        let visibleTargetWidth = this.elementRef.element.nativeElement.offsetWidth + newBackdropLeftWidth;\n        if (visibleTargetWidth >= 0) {\n            this.renderer.setStyle(this.targetBackdrop, 'width', visibleTargetWidth + 'px');\n        }\n        else {\n            this.renderer.setStyle(this.targetBackdrop, 'width', 0 + 'px');\n        }\n    }\n    handleVerticalScroll(step) {\n        let newBackdropTopHeight = step.isElementOrAncestorFixed ? this.targetAbsoluteTop : this.targetAbsoluteTop - this.lastYScroll;\n        if (newBackdropTopHeight >= 0) {\n            this.renderer.setStyle(this.backdropTop, 'height', newBackdropTopHeight + 'px');\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\n        }\n        else {\n            this.handleTargetPartialHeight(newBackdropTopHeight);\n        }\n    }\n    handleTargetPartialHeight(newBackdropTopHeight) {\n        this.renderer.setStyle(this.backdropTop, 'height', 0 + 'px');\n        let visibleTargetHeight = this.elementRef.element.nativeElement.offsetHeight + newBackdropTopHeight;\n        if (visibleTargetHeight >= 0) {\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', visibleTargetHeight + 'px');\n        }\n        else {\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', 0 + 'px');\n        }\n    }\n    removeLastBackdrop() {\n        if (this.lastBackdropContainer) {\n            this.renderer.removeChild(document.body, this.lastBackdropContainer);\n            this.lastBackdropContainer = undefined;\n        }\n    }\n    drawCurrentBackdrop() {\n        this.renderer.appendChild(document.body, this.currentBackdropContainer);\n    }\n}\nJoyrideBackdropService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideBackdropService, deps: [{ token: DocumentService }, { token: JoyrideOptionsService }, { token: i0.RendererFactory2 }], target: i0.ɵɵFactoryTarget.Injectable });\nJoyrideBackdropService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideBackdropService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideBackdropService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: DocumentService }, { type: JoyrideOptionsService }, { type: i0.RendererFactory2 }]; } });\n\nclass Scroll {\n}\nclass EventListenerService {\n    constructor(rendererFactory, DOMService) {\n        this.rendererFactory = rendererFactory;\n        this.DOMService = DOMService;\n        this.scrollEvent = new Subject();\n        this.resizeEvent = new Subject();\n        this.renderer = rendererFactory.createRenderer(null, null);\n    }\n    startListeningScrollEvents() {\n        this.scrollUnlisten = this.renderer.listen('document', 'scroll', evt => {\n            this.scrollEvent.next({\n                scrollX: this.DOMService.getNativeWindow().pageXOffset,\n                scrollY: this.DOMService.getNativeWindow().pageYOffset\n            });\n        });\n    }\n    startListeningResizeEvents() {\n        this.resizeUnlisten = this.renderer.listen('window', 'resize', evt => {\n            this.resizeEvent.next(evt);\n        });\n    }\n    stopListeningScrollEvents() {\n        this.scrollUnlisten();\n    }\n    stopListeningResizeEvents() {\n        this.resizeUnlisten();\n    }\n}\nEventListenerService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: EventListenerService, deps: [{ token: i0.RendererFactory2 }, { token: DomRefService }], target: i0.ɵɵFactoryTarget.Injectable });\nEventListenerService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: EventListenerService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: EventListenerService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i0.RendererFactory2 }, { type: DomRefService }]; } });\n\nclass JoyrideArrowComponent {\n    constructor() {\n        this.position = 'top';\n    }\n}\nJoyrideArrowComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideArrowComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nJoyrideArrowComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.1\", type: JoyrideArrowComponent, selector: \"joyride-arrow\", inputs: { position: \"position\" }, ngImport: i0, template: \"<div [class.joyride-arrow__top]=\\\"position == 'top'\\\"\\n     [class.joyride-arrow__bottom]=\\\"position == 'bottom'\\\"\\n     [class.joyride-arrow__left]=\\\"position == 'left'\\\"\\n     [class.joyride-arrow__right]=\\\"position == 'right'\\\">\\n</div>\", styles: [\".joyride-arrow__top{border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #ffffff}.joyride-arrow__bottom{border-left:11px solid transparent;border-right:11px solid transparent;border-top:11px solid #ffffff}.joyride-arrow__right{border-left:11px solid #ffffff;border-bottom:11px solid transparent;border-top:11px solid transparent}.joyride-arrow__left{border-right:11px solid #ffffff;border-top:11px solid transparent;border-bottom:11px solid transparent}\\n\"], encapsulation: i0.ViewEncapsulation.None });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideArrowComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'joyride-arrow', encapsulation: ViewEncapsulation.None, template: \"<div [class.joyride-arrow__top]=\\\"position == 'top'\\\"\\n     [class.joyride-arrow__bottom]=\\\"position == 'bottom'\\\"\\n     [class.joyride-arrow__left]=\\\"position == 'left'\\\"\\n     [class.joyride-arrow__right]=\\\"position == 'right'\\\">\\n</div>\", styles: [\".joyride-arrow__top{border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #ffffff}.joyride-arrow__bottom{border-left:11px solid transparent;border-right:11px solid transparent;border-top:11px solid #ffffff}.joyride-arrow__right{border-left:11px solid #ffffff;border-bottom:11px solid transparent;border-top:11px solid transparent}.joyride-arrow__left{border-right:11px solid #ffffff;border-top:11px solid transparent;border-bottom:11px solid transparent}\\n\"] }]\n        }], propDecorators: { position: [{\n                type: Input\n            }] } });\n\nclass JoyrideCloseButtonComponent {\n}\nJoyrideCloseButtonComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideCloseButtonComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nJoyrideCloseButtonComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.1\", type: JoyrideCloseButtonComponent, selector: \"joy-close-button\", ngImport: i0, template: `<svg viewBox=\"0 0 25 25\" xmlns=\"http://www.w3.org/2000/svg\">\n                <line x1=\"1\" y1=\"24\" \n                    x2=\"24\" y2=\"1\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n                <line x1=\"1\" y1=\"1\" \n                    x2=\"24\" y2=\"24\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n            </svg>`, isInline: true });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideCloseButtonComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'joy-close-button',\n                    template: `<svg viewBox=\"0 0 25 25\" xmlns=\"http://www.w3.org/2000/svg\">\n                <line x1=\"1\" y1=\"24\" \n                    x2=\"24\" y2=\"1\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n                <line x1=\"1\" y1=\"1\" \n                    x2=\"24\" y2=\"24\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n            </svg>`\n                }]\n        }] });\n\nclass JoyrideButtonComponent {\n    constructor() {\n        this.clicked = new EventEmitter();\n    }\n    onClick() {\n        this.clicked.emit();\n    }\n}\nJoyrideButtonComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideButtonComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nJoyrideButtonComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.1\", type: JoyrideButtonComponent, selector: \"joyride-button\", inputs: { color: \"color\" }, outputs: { clicked: \"clicked\" }, ngImport: i0, template: \"<button (mouseleave)=\\\"hover=false\\\" (mouseover)=\\\"hover=true\\\"\\n    [ngStyle]=\\\"{'background-color': hover ? '#fff' : color, \\n                'color': hover ? color : '#fff',\\n                'border-color' : hover ? color : 'transparent'}\\\"\\n    class=\\\"joyride-button\\\" (click)=\\\"onClick()\\\">\\n    <ng-content></ng-content>\\n</button>\", styles: [\".joyride-button{text-transform:uppercase;border:2px solid transparent;outline:none;padding:6px 12px;font-size:12px;font-weight:700;color:#fff;background-color:#3b5560;cursor:pointer}.joyride-button:hover{color:#3b5560;border:2px solid #3b5560;background-color:#fff}\\n\"], directives: [{ type: i10.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideButtonComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'joyride-button', template: \"<button (mouseleave)=\\\"hover=false\\\" (mouseover)=\\\"hover=true\\\"\\n    [ngStyle]=\\\"{'background-color': hover ? '#fff' : color, \\n                'color': hover ? color : '#fff',\\n                'border-color' : hover ? color : 'transparent'}\\\"\\n    class=\\\"joyride-button\\\" (click)=\\\"onClick()\\\">\\n    <ng-content></ng-content>\\n</button>\", styles: [\".joyride-button{text-transform:uppercase;border:2px solid transparent;outline:none;padding:6px 12px;font-size:12px;font-weight:700;color:#fff;background-color:#3b5560;cursor:pointer}.joyride-button:hover{color:#3b5560;border:2px solid #3b5560;background-color:#fff}\\n\"] }]\n        }], propDecorators: { color: [{\n                type: Input\n            }], clicked: [{\n                type: Output\n            }] } });\n\nconst STEP_MIN_WIDTH = 200;\nconst STEP_MAX_WIDTH = 400;\nconst CUSTOM_STEP_MAX_WIDTH_VW = 90;\nconst STEP_HEIGHT = 200;\nconst ASPECT_RATIO = 1.212;\nconst DEFAULT_DISTANCE_FROM_MARGIN_TOP = 2;\nconst DEFAULT_DISTANCE_FROM_MARGIN_LEFT = 2;\nconst DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM = 5;\nconst DEFAULT_DISTANCE_FROM_MARGIN_RIGHT = 5;\nvar KEY_CODE;\n(function (KEY_CODE) {\n    KEY_CODE[KEY_CODE[\"RIGHT_ARROW\"] = 39] = \"RIGHT_ARROW\";\n    KEY_CODE[KEY_CODE[\"LEFT_ARROW\"] = 37] = \"LEFT_ARROW\";\n    KEY_CODE[KEY_CODE[\"ESCAPE_KEY\"] = 27] = \"ESCAPE_KEY\";\n})(KEY_CODE || (KEY_CODE = {}));\nclass JoyrideStepComponent {\n    constructor(injector, stepsContainerService, eventListenerService, documentService, renderer, logger, optionsService, templateService) {\n        this.injector = injector;\n        this.stepsContainerService = stepsContainerService;\n        this.eventListenerService = eventListenerService;\n        this.documentService = documentService;\n        this.renderer = renderer;\n        this.logger = logger;\n        this.optionsService = optionsService;\n        this.templateService = templateService;\n        this.stepWidth = STEP_MIN_WIDTH;\n        this.stepHeight = STEP_HEIGHT;\n        this.showArrow = true;\n        this.arrowSize = ARROW_SIZE;\n        this.subscriptions = [];\n    }\n    ngOnInit() {\n        // Need to Inject here otherwise you will obtain a circular dependency\n        this.joyrideStepService = this.injector.get(JoyrideStepService);\n        this.documentHeight = this.documentService.getDocumentHeight();\n        this.subscriptions.push(this.subscribeToResizeEvents());\n        this.title = this.step.title.asObservable();\n        this.text = this.step.text.asObservable();\n        this.setCustomTemplates();\n        this.setCustomTexts();\n        this.counter = this.getCounter();\n        this.isCounterVisible = this.optionsService.isCounterVisible();\n        this.isPrevButtonVisible = this.optionsService.isPrevButtonVisible();\n        this.themeColor = this.optionsService.getThemeColor();\n        if (this.text)\n            this.text.subscribe(val => this.checkRedraw(val));\n        if (this.title)\n            this.title.subscribe(val => this.checkRedraw(val));\n    }\n    ngAfterViewInit() {\n        if (this.isCustomized()) {\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', CUSTOM_STEP_MAX_WIDTH_VW + 'vw');\n            this.updateStepDimensions();\n        }\n        else {\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', STEP_MAX_WIDTH + 'px');\n            let dimensions = this.getDimensionsByAspectRatio(this.stepContainer.nativeElement.clientWidth, this.stepContainer.nativeElement.clientHeight, ASPECT_RATIO);\n            dimensions = this.adjustDimensions(dimensions.width, dimensions.height);\n            this.stepWidth = dimensions.width;\n            this.stepHeight = dimensions.height;\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'width', this.stepWidth + 'px');\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'height', this.stepHeight + 'px');\n        }\n        this.drawStep();\n    }\n    checkRedraw(val) {\n        if (val != null) {\n            // Need to wait that the change is rendered before redrawing\n            setTimeout(() => {\n                this.redrawStep();\n            }, 2);\n        }\n    }\n    isCustomized() {\n        return (this.step.stepContent ||\n            this.templateService.getCounter() ||\n            this.templateService.getPrevButton() ||\n            this.templateService.getNextButton() ||\n            this.templateService.getDoneButton());\n    }\n    setCustomTexts() {\n        const customeTexts = this.optionsService.getCustomTexts();\n        this.prevText = customeTexts.prev;\n        this.nextText = customeTexts.next;\n        this.doneText = customeTexts.done;\n    }\n    drawStep() {\n        let position = this.step.isElementOrAncestorFixed\n            ? 'fixed'\n            : 'absolute';\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', position);\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', this.step.transformCssStyle);\n        this.targetWidth = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width;\n        this.targetHeight = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height;\n        this.targetAbsoluteLeft =\n            position === 'fixed'\n                ? this.documentService.getElementFixedLeft(this.step.targetViewContainer.element)\n                : this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element);\n        this.targetAbsoluteTop =\n            position === 'fixed'\n                ? this.documentService.getElementFixedTop(this.step.targetViewContainer.element)\n                : this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element);\n        this.setStepStyle();\n    }\n    getCounter() {\n        let stepPosition = this.stepsContainerService.getStepNumber(this.step.name);\n        let numberOfSteps = this.stepsContainerService.getStepsCount();\n        this.counterData = { step: stepPosition, total: numberOfSteps };\n        return stepPosition + '/' + numberOfSteps;\n    }\n    setCustomTemplates() {\n        this.customContent = this.step.stepContent;\n        this.ctx = this.step.stepContentParams;\n        this.customPrevButton = this.templateService.getPrevButton();\n        this.customNextButton = this.templateService.getNextButton();\n        this.customDoneButton = this.templateService.getDoneButton();\n        this.customCounter = this.templateService.getCounter();\n    }\n    keyEvent(event) {\n        console.log(event);\n        if (event.keyCode === KEY_CODE.RIGHT_ARROW) {\n            if (this.isLastStep()) {\n                this.close();\n            }\n            else {\n                this.next();\n            }\n        }\n        else if (event.keyCode === KEY_CODE.LEFT_ARROW) {\n            this.prev();\n        }\n        else if (event.keyCode === KEY_CODE.ESCAPE_KEY) {\n            this.close();\n        }\n    }\n    prev() {\n        this.joyrideStepService.prev();\n    }\n    next() {\n        this.joyrideStepService.next();\n    }\n    close() {\n        this.joyrideStepService.close();\n    }\n    isFirstStep() {\n        return this.stepsContainerService.getStepNumber(this.step.name) === 1;\n    }\n    isLastStep() {\n        return (this.stepsContainerService.getStepNumber(this.step.name) ===\n            this.stepsContainerService.getStepsCount());\n    }\n    setStepStyle() {\n        switch (this.step.position) {\n            case 'top': {\n                this.setStyleTop();\n                break;\n            }\n            case 'bottom': {\n                this.setStyleBottom();\n                break;\n            }\n            case 'right': {\n                this.setStyleRight();\n                break;\n            }\n            case 'left': {\n                this.setStyleLeft();\n                break;\n            }\n            case 'center': {\n                this.setStyleCenter();\n                break;\n            }\n            default: {\n                this.setStyleBottom();\n            }\n        }\n    }\n    setStyleTop() {\n        this.stepsContainerService.updatePosition(this.step.name, 'top');\n        this.topPosition =\n            this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\n        this.stepAbsoluteTop =\n            this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\n        this.arrowTopPosition = this.stepHeight;\n        this.leftPosition =\n            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n        this.stepAbsoluteLeft =\n            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\n        this.adjustLeftPosition();\n        this.adjustRightPosition();\n        this.arrowPosition = 'bottom';\n        this.autofixTopPosition();\n    }\n    setStyleRight() {\n        this.stepsContainerService.updatePosition(this.step.name, 'right');\n        this.topPosition =\n            this.targetAbsoluteTop +\n                this.targetHeight / 2 -\n                this.stepHeight / 2;\n        this.stepAbsoluteTop =\n            this.targetAbsoluteTop +\n                this.targetHeight / 2 -\n                this.stepHeight / 2;\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\n        this.leftPosition =\n            this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\n        this.stepAbsoluteLeft =\n            this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\n        this.arrowLeftPosition = -this.arrowSize;\n        this.adjustTopPosition();\n        this.adjustBottomPosition();\n        this.arrowPosition = 'left';\n        this.autofixRightPosition();\n    }\n    setStyleBottom() {\n        this.stepsContainerService.updatePosition(this.step.name, 'bottom');\n        this.topPosition =\n            this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\n        this.stepAbsoluteTop =\n            this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\n        this.arrowTopPosition = -this.arrowSize;\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\n        this.leftPosition =\n            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n        this.stepAbsoluteLeft =\n            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n        this.adjustLeftPosition();\n        this.adjustRightPosition();\n        this.arrowPosition = 'top';\n        this.autofixBottomPosition();\n    }\n    setStyleLeft() {\n        this.stepsContainerService.updatePosition(this.step.name, 'left');\n        this.topPosition =\n            this.targetAbsoluteTop +\n                this.targetHeight / 2 -\n                this.stepHeight / 2;\n        this.stepAbsoluteTop =\n            this.targetAbsoluteTop +\n                this.targetHeight / 2 -\n                this.stepHeight / 2;\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\n        this.leftPosition =\n            this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\n        this.stepAbsoluteLeft =\n            this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\n        this.arrowLeftPosition = this.stepWidth;\n        this.adjustTopPosition();\n        this.adjustBottomPosition();\n        this.arrowPosition = 'right';\n        this.autofixLeftPosition();\n    }\n    setStyleCenter() {\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', 'fixed');\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'top', '50%');\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'left', '50%');\n        this.updateStepDimensions();\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', `translate(-${this.stepWidth / 2}px, -${this.stepHeight / 2}px)`);\n        this.showArrow = false;\n    }\n    adjustLeftPosition() {\n        if (this.leftPosition < 0) {\n            this.arrowLeftPosition =\n                this.arrowLeftPosition +\n                    this.leftPosition -\n                    DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\n            this.leftPosition = DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\n        }\n    }\n    adjustRightPosition() {\n        let currentWindowWidth = document.body.clientWidth;\n        if (this.stepAbsoluteLeft + this.stepWidth > currentWindowWidth) {\n            let newLeftPos = this.leftPosition -\n                (this.stepAbsoluteLeft +\n                    this.stepWidth +\n                    DEFAULT_DISTANCE_FROM_MARGIN_RIGHT -\n                    currentWindowWidth);\n            let deltaLeftPosition = newLeftPos - this.leftPosition;\n            this.leftPosition = newLeftPos;\n            this.arrowLeftPosition = this.arrowLeftPosition - deltaLeftPosition;\n        }\n    }\n    adjustTopPosition() {\n        if (this.stepAbsoluteTop < 0) {\n            this.arrowTopPosition =\n                this.arrowTopPosition +\n                    this.topPosition -\n                    DEFAULT_DISTANCE_FROM_MARGIN_TOP;\n            this.topPosition = DEFAULT_DISTANCE_FROM_MARGIN_TOP;\n        }\n    }\n    adjustBottomPosition() {\n        if (this.stepAbsoluteTop + this.stepHeight > this.documentHeight) {\n            let newTopPos = this.topPosition -\n                (this.stepAbsoluteTop +\n                    this.stepHeight +\n                    DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM -\n                    this.documentHeight);\n            let deltaTopPosition = newTopPos - this.topPosition;\n            this.topPosition = newTopPos;\n            this.arrowTopPosition = this.arrowTopPosition - deltaTopPosition;\n        }\n    }\n    autofixTopPosition() {\n        if (this.positionAlreadyFixed) {\n            this.logger.warn('No step positions found for this step. The step will be centered.');\n        }\n        else if (this.targetAbsoluteTop - this.stepHeight - this.arrowSize <\n            0) {\n            this.positionAlreadyFixed = true;\n            this.setStyleRight();\n        }\n    }\n    autofixRightPosition() {\n        if (this.targetAbsoluteLeft +\n            this.targetWidth +\n            this.stepWidth +\n            this.arrowSize >\n            document.body.clientWidth) {\n            this.setStyleBottom();\n        }\n    }\n    autofixBottomPosition() {\n        if (this.targetAbsoluteTop +\n            this.stepHeight +\n            this.arrowSize +\n            this.targetHeight >\n            this.documentHeight) {\n            this.setStyleLeft();\n        }\n    }\n    autofixLeftPosition() {\n        if (this.targetAbsoluteLeft - this.stepWidth - this.arrowSize < 0) {\n            this.setStyleTop();\n        }\n    }\n    subscribeToResizeEvents() {\n        return this.eventListenerService.resizeEvent.subscribe(() => {\n            this.redrawStep();\n        });\n    }\n    redrawStep() {\n        this.updateStepDimensions();\n        this.drawStep();\n    }\n    getDimensionsByAspectRatio(width, height, aspectRatio) {\n        let calcHeight = (width + height) / (1 + aspectRatio);\n        let calcWidth = calcHeight * aspectRatio;\n        return {\n            width: calcWidth,\n            height: calcHeight\n        };\n    }\n    adjustDimensions(width, height) {\n        let area = width * height;\n        let newWidth = width;\n        let newHeight = height;\n        if (width > STEP_MAX_WIDTH) {\n            newWidth = STEP_MAX_WIDTH;\n            newHeight = area / newWidth;\n        }\n        else if (width < STEP_MIN_WIDTH) {\n            newWidth = STEP_MIN_WIDTH;\n            newHeight = STEP_MIN_WIDTH / ASPECT_RATIO;\n        }\n        return {\n            width: newWidth,\n            height: newHeight\n        };\n    }\n    updateStepDimensions() {\n        this.stepWidth = this.stepContainer.nativeElement.clientWidth;\n        this.stepHeight = this.stepContainer.nativeElement.clientHeight;\n    }\n    ngOnDestroy() {\n        this.subscriptions.forEach(subscription => {\n            subscription.unsubscribe();\n        });\n    }\n}\nJoyrideStepComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepComponent, deps: [{ token: i0.Injector }, { token: JoyrideStepsContainerService }, { token: EventListenerService }, { token: DocumentService }, { token: i0.Renderer2 }, { token: LoggerService }, { token: JoyrideOptionsService }, { token: TemplatesService }], target: i0.ɵɵFactoryTarget.Component });\nJoyrideStepComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.1\", type: JoyrideStepComponent, selector: \"joyride-step\", inputs: { step: \"step\" }, host: { listeners: { \"window:keyup\": \"keyEvent($event)\" } }, viewQueries: [{ propertyName: \"stepHolder\", first: true, predicate: [\"stepHolder\"], descendants: true, static: true }, { propertyName: \"stepContainer\", first: true, predicate: [\"stepContainer\"], descendants: true, static: true }], ngImport: i0, template: \"<div #stepHolder class=\\\"joyride-step__holder\\\" [id]=\\\"'joyride-step-' + step.name\\\" [style.top.px]=\\\"topPosition\\\" [style.left.px]=\\\"leftPosition\\\">\\n    <joyride-arrow *ngIf=\\\"showArrow\\\" class=\\\"joyride-step__arrow\\\" [position]=\\\"arrowPosition\\\" [style.top.px]=\\\"arrowTopPosition\\\"\\n        [style.left.px]=\\\"arrowLeftPosition\\\"></joyride-arrow>\\n    <div #stepContainer class=\\\"joyride-step__container\\\">\\n        <joy-close-button class=\\\"joyride-step__close\\\" (click)=\\\"close()\\\"></joy-close-button>\\n        <div class=\\\"joyride-step__header\\\">\\n            <div class=\\\"joyride-step__title\\\" [style.color]=\\\"themeColor\\\">{{ title | async }}</div>\\n        </div>\\n        <div class=\\\"joyride-step__body\\\">\\n            <ng-container *ngTemplateOutlet=\\\"customContent ? customContent : defaultContent; context: ctx\\\"></ng-container>\\n            <ng-template #defaultContent>\\n                {{ text | async }}\\n            </ng-template>\\n        </div>\\n        <div class=\\\"joyride-step__footer\\\">\\n            <div *ngIf=\\\"isCounterVisible\\\" class=\\\"joyride-step__counter-container\\\">\\n                <ng-container *ngTemplateOutlet=\\\"customCounter ? customCounter : defaultCounter; context: counterData\\\"></ng-container>\\n                <ng-template #defaultCounter>\\n                    <div class=\\\"joyride-step__counter\\\">{{ counter }}</div>\\n                </ng-template>\\n            </div>\\n            <div class=\\\"joyride-step__buttons-container\\\">\\n                <div class=\\\"joyride-step__prev-container joyride-step__button\\\" *ngIf=\\\"isPrevButtonVisible && !isFirstStep()\\\" (click)=\\\"prev()\\\">\\n                    <ng-container *ngTemplateOutlet=\\\"customPrevButton ? customPrevButton : defaultPrevButton\\\"></ng-container>\\n                    <ng-template #defaultPrevButton>\\n                        <joyride-button class=\\\"joyride-step__prev-button\\\" [color]=\\\"themeColor\\\">{{ prevText | async }}</joyride-button>\\n                    </ng-template>\\n                </div>\\n                <div class=\\\"joyride-step__next-container joyride-step__button\\\" *ngIf=\\\"!isLastStep(); else doneButton\\\" (click)=\\\"next()\\\">\\n                    <ng-container *ngTemplateOutlet=\\\"customNextButton ? customNextButton : defaulNextButton\\\"></ng-container>\\n                    <ng-template #defaulNextButton>\\n                        <joyride-button [color]=\\\"themeColor\\\">{{ nextText | async }}</joyride-button>\\n                    </ng-template>\\n                </div>\\n                <ng-template #doneButton>\\n                    <div class=\\\"joyride-step__done-container joyride-step__button\\\" (click)=\\\"close()\\\">\\n                        <ng-container *ngTemplateOutlet=\\\"customDoneButton ? customDoneButton : defaultDoneButton\\\"></ng-container>\\n                        <ng-template #defaultDoneButton>\\n                            <joyride-button class=\\\"joyride-step__done-button\\\" [color]=\\\"themeColor\\\">{{ doneText | async }}</joyride-button>\\n                        </ng-template>\\n                    </div>\\n                </ng-template>\\n            </div>\\n        </div>\\n    </div>\\n</div>\", styles: [\".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:flex;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:flex;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}\\n\"], components: [{ type: JoyrideArrowComponent, selector: \"joyride-arrow\", inputs: [\"position\"] }, { type: JoyrideCloseButtonComponent, selector: \"joy-close-button\" }, { type: JoyrideButtonComponent, selector: \"joyride-button\", inputs: [\"color\"], outputs: [\"clicked\"] }], directives: [{ type: i10.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i10.NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\"] }], pipes: { \"async\": i10.AsyncPipe }, encapsulation: i0.ViewEncapsulation.None });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'joyride-step', encapsulation: ViewEncapsulation.None, template: \"<div #stepHolder class=\\\"joyride-step__holder\\\" [id]=\\\"'joyride-step-' + step.name\\\" [style.top.px]=\\\"topPosition\\\" [style.left.px]=\\\"leftPosition\\\">\\n    <joyride-arrow *ngIf=\\\"showArrow\\\" class=\\\"joyride-step__arrow\\\" [position]=\\\"arrowPosition\\\" [style.top.px]=\\\"arrowTopPosition\\\"\\n        [style.left.px]=\\\"arrowLeftPosition\\\"></joyride-arrow>\\n    <div #stepContainer class=\\\"joyride-step__container\\\">\\n        <joy-close-button class=\\\"joyride-step__close\\\" (click)=\\\"close()\\\"></joy-close-button>\\n        <div class=\\\"joyride-step__header\\\">\\n            <div class=\\\"joyride-step__title\\\" [style.color]=\\\"themeColor\\\">{{ title | async }}</div>\\n        </div>\\n        <div class=\\\"joyride-step__body\\\">\\n            <ng-container *ngTemplateOutlet=\\\"customContent ? customContent : defaultContent; context: ctx\\\"></ng-container>\\n            <ng-template #defaultContent>\\n                {{ text | async }}\\n            </ng-template>\\n        </div>\\n        <div class=\\\"joyride-step__footer\\\">\\n            <div *ngIf=\\\"isCounterVisible\\\" class=\\\"joyride-step__counter-container\\\">\\n                <ng-container *ngTemplateOutlet=\\\"customCounter ? customCounter : defaultCounter; context: counterData\\\"></ng-container>\\n                <ng-template #defaultCounter>\\n                    <div class=\\\"joyride-step__counter\\\">{{ counter }}</div>\\n                </ng-template>\\n            </div>\\n            <div class=\\\"joyride-step__buttons-container\\\">\\n                <div class=\\\"joyride-step__prev-container joyride-step__button\\\" *ngIf=\\\"isPrevButtonVisible && !isFirstStep()\\\" (click)=\\\"prev()\\\">\\n                    <ng-container *ngTemplateOutlet=\\\"customPrevButton ? customPrevButton : defaultPrevButton\\\"></ng-container>\\n                    <ng-template #defaultPrevButton>\\n                        <joyride-button class=\\\"joyride-step__prev-button\\\" [color]=\\\"themeColor\\\">{{ prevText | async }}</joyride-button>\\n                    </ng-template>\\n                </div>\\n                <div class=\\\"joyride-step__next-container joyride-step__button\\\" *ngIf=\\\"!isLastStep(); else doneButton\\\" (click)=\\\"next()\\\">\\n                    <ng-container *ngTemplateOutlet=\\\"customNextButton ? customNextButton : defaulNextButton\\\"></ng-container>\\n                    <ng-template #defaulNextButton>\\n                        <joyride-button [color]=\\\"themeColor\\\">{{ nextText | async }}</joyride-button>\\n                    </ng-template>\\n                </div>\\n                <ng-template #doneButton>\\n                    <div class=\\\"joyride-step__done-container joyride-step__button\\\" (click)=\\\"close()\\\">\\n                        <ng-container *ngTemplateOutlet=\\\"customDoneButton ? customDoneButton : defaultDoneButton\\\"></ng-container>\\n                        <ng-template #defaultDoneButton>\\n                            <joyride-button class=\\\"joyride-step__done-button\\\" [color]=\\\"themeColor\\\">{{ doneText | async }}</joyride-button>\\n                        </ng-template>\\n                    </div>\\n                </ng-template>\\n            </div>\\n        </div>\\n    </div>\\n</div>\", styles: [\".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:flex;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:flex;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i0.Injector }, { type: JoyrideStepsContainerService }, { type: EventListenerService }, { type: DocumentService }, { type: i0.Renderer2 }, { type: LoggerService }, { type: JoyrideOptionsService }, { type: TemplatesService }]; }, propDecorators: { step: [{\n                type: Input\n            }], stepHolder: [{\n                type: ViewChild,\n                args: ['stepHolder', { static: true }]\n            }], stepContainer: [{\n                type: ViewChild,\n                args: ['stepContainer', { static: true }]\n            }], keyEvent: [{\n                type: HostListener,\n                args: ['window:keyup', ['$event']]\n            }] } });\n\nclass StepDrawerService {\n    constructor(componentFactoryResolver, appRef, injector) {\n        this.componentFactoryResolver = componentFactoryResolver;\n        this.appRef = appRef;\n        this.injector = injector;\n        this.refMap = {};\n    }\n    draw(step) {\n        // 1. Create a component reference from the component\n        const ref = this.componentFactoryResolver\n            .resolveComponentFactory(JoyrideStepComponent)\n            .create(this.injector);\n        // 2. Attach component to the appRef so that it's inside the ng component tree\n        this.appRef.attachView(ref.hostView);\n        // 3. Get DOM element from component\n        const domElem = ref.hostView\n            .rootNodes[0];\n        // 4. Append DOM element to the body\n        document.body.appendChild(domElem);\n        const instance = ref.instance;\n        instance.step = step;\n        ref.changeDetectorRef.detectChanges();\n        step.stepInstance = instance;\n        this.refMap[step.name] = ref;\n    }\n    remove(step) {\n        this.appRef.detachView(this.refMap[step.name].hostView);\n        this.refMap[step.name].destroy();\n    }\n}\nStepDrawerService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: StepDrawerService, deps: [{ token: i0.ComponentFactoryResolver }, { token: i0.ApplicationRef }, { token: i0.Injector }], target: i0.ɵɵFactoryTarget.Injectable });\nStepDrawerService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: StepDrawerService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: StepDrawerService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i0.ComponentFactoryResolver }, { type: i0.ApplicationRef }, { type: i0.Injector }]; } });\n\nconst SCROLLBAR_SIZE = 20;\nconst DISTANCE_FROM_TARGET = 15;\nconst ARROW_SIZE = 10;\nclass JoyrideStepService {\n    constructor(backDropService, eventListener, stepsContainerService, documentService, DOMService, stepDrawerService, optionsService, router, logger) {\n        this.backDropService = backDropService;\n        this.eventListener = eventListener;\n        this.stepsContainerService = stepsContainerService;\n        this.documentService = documentService;\n        this.DOMService = DOMService;\n        this.stepDrawerService = stepDrawerService;\n        this.optionsService = optionsService;\n        this.router = router;\n        this.logger = logger;\n        this.winTopPosition = 0;\n        this.winBottomPosition = 0;\n        this.stepsObserver = new ReplaySubject();\n        this.initViewportPositions();\n        this.subscribeToScrollEvents();\n        this.subscribeToResizeEvents();\n    }\n    initViewportPositions() {\n        this.winTopPosition = 0;\n        this.winBottomPosition = this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\n    }\n    subscribeToScrollEvents() {\n        this.eventListener.startListeningScrollEvents();\n        this.eventListener.scrollEvent.subscribe(scroll => {\n            this.winTopPosition = scroll.scrollY;\n            this.winBottomPosition = this.winTopPosition + this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\n            if (this.currentStep)\n                this.backDropService.redraw(this.currentStep, scroll);\n        });\n    }\n    subscribeToResizeEvents() {\n        this.eventListener.resizeEvent.subscribe(() => {\n            if (this.currentStep)\n                this.backDropService.redrawTarget(this.currentStep);\n        });\n    }\n    drawStep(step) {\n        step.position = step.position === NO_POSITION ? this.optionsService.getStepDefaultPosition() : step.position;\n        this.stepDrawerService.draw(step);\n    }\n    startTour() {\n        this.stepsObserver = new ReplaySubject();\n        this.stepsContainerService.init();\n        this.documentService.setDocumentHeight();\n        this.tryShowStep(StepActionType.NEXT);\n        this.eventListener.startListeningResizeEvents();\n        this.subscribeToStepsUpdates();\n        return this.stepsObserver.asObservable();\n    }\n    close() {\n        this.removeCurrentStep();\n        this.notifyTourIsFinished();\n        this.DOMService.getNativeWindow().scrollTo(0, 0);\n        this.eventListener.stopListeningResizeEvents();\n        this.backDropService.remove();\n    }\n    prev() {\n        this.removeCurrentStep();\n        this.currentStep.prevCliked.emit();\n        this.tryShowStep(StepActionType.PREV);\n    }\n    next() {\n        this.removeCurrentStep();\n        this.currentStep.nextClicked.emit();\n        this.tryShowStep(StepActionType.NEXT);\n    }\n    async navigateToStepPage(action) {\n        let stepRoute = this.stepsContainerService.getStepRoute(action);\n        if (stepRoute) {\n            return await this.router.navigate([stepRoute]);\n        }\n    }\n    subscribeToStepsUpdates() {\n        this.stepsContainerService.stepHasBeenModified.subscribe(updatedStep => {\n            if (this.currentStep && this.currentStep.name === updatedStep.name) {\n                this.currentStep = updatedStep;\n            }\n        });\n    }\n    async tryShowStep(actionType) {\n        await this.navigateToStepPage(actionType);\n        const timeout = this.optionsService.getWaitingTime();\n        if (timeout > 100)\n            this.backDropService.remove();\n        setTimeout(() => {\n            try {\n                this.showStep(actionType);\n            }\n            catch (error) {\n                if (error instanceof JoyrideStepDoesNotExist) {\n                    this.tryShowStep(actionType);\n                }\n                else if (error instanceof JoyrideStepOutOfRange) {\n                    this.logger.error('Forcing the tour closure: First or Last step not found in the DOM.');\n                    this.close();\n                }\n                else {\n                    throw new Error(error);\n                }\n            }\n        }, timeout);\n    }\n    showStep(actionType) {\n        this.currentStep = this.stepsContainerService.get(actionType);\n        if (this.currentStep == null)\n            throw new JoyrideStepDoesNotExist('');\n        this.notifyStepClicked(actionType);\n        // Scroll the element to get it visible if it's in a scrollable element\n        this.scrollIfElementBeyondOtherElements();\n        this.backDropService.draw(this.currentStep);\n        this.drawStep(this.currentStep);\n        this.scrollIfStepAndTargetAreNotVisible();\n    }\n    notifyStepClicked(actionType) {\n        let stepInfo = {\n            number: this.stepsContainerService.getStepNumber(this.currentStep.name),\n            name: this.currentStep.name,\n            route: this.currentStep.route,\n            actionType\n        };\n        this.stepsObserver.next(stepInfo);\n    }\n    notifyTourIsFinished() {\n        if (this.currentStep)\n            this.currentStep.tourDone.emit();\n        this.stepsObserver.complete();\n    }\n    removeCurrentStep() {\n        if (this.currentStep)\n            this.stepDrawerService.remove(this.currentStep);\n    }\n    scrollIfStepAndTargetAreNotVisible() {\n        this.scrollWhenTargetOrStepAreHiddenBottom();\n        this.scrollWhenTargetOrStepAreHiddenTop();\n    }\n    scrollWhenTargetOrStepAreHiddenBottom() {\n        let totalTargetBottom = this.getMaxTargetAndStepBottomPosition();\n        if (totalTargetBottom > this.winBottomPosition) {\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetBottom - this.winBottomPosition);\n        }\n    }\n    scrollWhenTargetOrStepAreHiddenTop() {\n        let totalTargetTop = this.getMaxTargetAndStepTopPosition();\n        if (totalTargetTop < this.winTopPosition) {\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetTop - this.winTopPosition);\n        }\n    }\n    getMaxTargetAndStepBottomPosition() {\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\n        if (this.currentStep.position === 'top') {\n            return targetAbsoluteTop + this.currentStep.stepInstance.targetHeight;\n        }\n        else if (this.currentStep.position === 'bottom') {\n            return (targetAbsoluteTop +\n                this.currentStep.stepInstance.targetHeight +\n                this.currentStep.stepInstance.stepHeight +\n                ARROW_SIZE +\n                DISTANCE_FROM_TARGET);\n        }\n        else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\n            return Math.max(targetAbsoluteTop + this.currentStep.stepInstance.targetHeight, targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 + this.currentStep.stepInstance.stepHeight / 2);\n        }\n    }\n    getMaxTargetAndStepTopPosition() {\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\n        if (this.currentStep.position === 'top') {\n            return targetAbsoluteTop - (this.currentStep.stepInstance.stepHeight + ARROW_SIZE + DISTANCE_FROM_TARGET);\n        }\n        else if (this.currentStep.position === 'bottom') {\n            return targetAbsoluteTop;\n        }\n        else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\n            return Math.min(targetAbsoluteTop, targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 - this.currentStep.stepInstance.stepHeight / 2);\n        }\n    }\n    scrollIfElementBeyondOtherElements() {\n        if (this.isElementBeyondOthers() === 2) {\n            this.documentService.scrollToTheTop(this.currentStep.targetViewContainer.element);\n        }\n        if (this.isElementBeyondOthers() === 2) {\n            this.documentService.scrollToTheBottom(this.currentStep.targetViewContainer.element);\n        }\n        if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\n            this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element, this.currentStep.isElementOrAncestorFixed);\n        }\n        if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\n            this.currentStep.targetViewContainer.element.nativeElement.scrollIntoView();\n        }\n    }\n    isElementBeyondOthers() {\n        return this.documentService.isElementBeyondOthers(this.currentStep.targetViewContainer.element, this.currentStep.isElementOrAncestorFixed, 'backdrop');\n    }\n}\nJoyrideStepService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepService, deps: [{ token: JoyrideBackdropService }, { token: EventListenerService }, { token: JoyrideStepsContainerService }, { token: DocumentService }, { token: DomRefService }, { token: StepDrawerService }, { token: JoyrideOptionsService }, { token: i3.Router }, { token: LoggerService }], target: i0.ɵɵFactoryTarget.Injectable });\nJoyrideStepService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: JoyrideBackdropService }, { type: EventListenerService }, { type: JoyrideStepsContainerService }, { type: DocumentService }, { type: DomRefService }, { type: StepDrawerService }, { type: JoyrideOptionsService }, { type: i3.Router }, { type: LoggerService }]; } });\n\nclass JoyrideService {\n    constructor(platformId, stepService, optionsService) {\n        this.platformId = platformId;\n        this.stepService = stepService;\n        this.optionsService = optionsService;\n        this.tourInProgress = false;\n    }\n    startTour(options) {\n        if (!isPlatformBrowser(this.platformId)) {\n            return of(new JoyrideStepInfo());\n        }\n        if (!this.tourInProgress) {\n            this.tourInProgress = true;\n            if (options) {\n                this.optionsService.setOptions(options);\n            }\n            this.tour$ = this.stepService.startTour().pipe(finalize(() => (this.tourInProgress = false)));\n            this.tour$.subscribe();\n        }\n        return this.tour$;\n    }\n    closeTour() {\n        if (this.isTourInProgress())\n            this.stepService.close();\n    }\n    isTourInProgress() {\n        return this.tourInProgress;\n    }\n}\nJoyrideService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideService, deps: [{ token: PLATFORM_ID }, { token: JoyrideStepService }, { token: JoyrideOptionsService }], target: i0.ɵɵFactoryTarget.Injectable });\nJoyrideService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: JoyrideStepService }, { type: JoyrideOptionsService }]; } });\n\nconst routerModuleForChild = RouterModule.forChild([]);\nclass JoyrideModule {\n    static forRoot() {\n        return {\n            ngModule: JoyrideModule,\n            providers: [\n                JoyrideService,\n                JoyrideStepService,\n                JoyrideStepsContainerService,\n                JoyrideBackdropService,\n                EventListenerService,\n                DocumentService,\n                JoyrideOptionsService,\n                StepDrawerService,\n                DomRefService,\n                LoggerService,\n                TemplatesService,\n            ],\n        };\n    }\n    static forChild() {\n        return {\n            ngModule: JoyrideModule,\n            providers: [],\n        };\n    }\n}\nJoyrideModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nJoyrideModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideModule, declarations: [JoyrideDirective,\n        JoyrideStepComponent,\n        JoyrideArrowComponent,\n        JoyrideButtonComponent,\n        JoyrideCloseButtonComponent], imports: [CommonModule, i3.RouterModule], exports: [JoyrideDirective] });\nJoyrideModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideModule, imports: [[CommonModule, routerModuleForChild]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule, routerModuleForChild],\n                    declarations: [\n                        JoyrideDirective,\n                        JoyrideStepComponent,\n                        JoyrideArrowComponent,\n                        JoyrideButtonComponent,\n                        JoyrideCloseButtonComponent,\n                    ],\n                    exports: [JoyrideDirective],\n                }]\n        }] });\n\n/*\n * Public API Surface of ngx-joyride\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ARROW_SIZE, DEFAULT_DISTANCE_FROM_MARGIN_LEFT, DEFAULT_DISTANCE_FROM_MARGIN_TOP, DEFAULT_TEXTS, DEFAULT_THEME_COLOR, DEFAULT_TIMEOUT_BETWEEN_STEPS, DISTANCE_FROM_TARGET, DocumentService, DomRefService, EventListenerService, JoyrideArrowComponent, JoyrideBackdropService, JoyrideButtonComponent, JoyrideCloseButtonComponent, JoyrideDirective, JoyrideModule, JoyrideOptionsService, JoyrideService, JoyrideStepComponent, JoyrideStepService, JoyrideStepsContainerService, KEY_CODE, LoggerService, NO_POSITION, ObservableCustomTexts, STEP_DEFAULT_POSITION, Scroll, StepActionType, StepDrawerService, TemplatesService, routerModuleForChild };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}